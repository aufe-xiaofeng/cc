<!DOCTYPE html>
<!-- saved from url=(0055)http://www.cnblogs.com/yuanchenqi/articles/5732581.html -->
<html lang="zh-cn"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8">

<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Py西游攻关之模块 - Yuan先生 - 博客园</title>
<link type="text/css" rel="stylesheet" href="./index_files/blog-common.css">
<link id="MainCss" type="text/css" rel="stylesheet" href="./index_files/bundle-UnlimitedSunlight.css">
<link type="text/css" rel="stylesheet" href="./index_files/262677.css">
<link id="mobile-style" media="only screen and (max-width: 767px)" type="text/css" rel="stylesheet" href="./index_files/bundle-UnlimitedSunlight-mobile.css">
<link title="RSS" type="application/rss+xml" rel="alternate" href="http://www.cnblogs.com/yuanchenqi/rss">
<link title="RSD" type="application/rsd+xml" rel="EditURI" href="http://www.cnblogs.com/yuanchenqi/rsd.xml">
<link type="application/wlwmanifest+xml" rel="wlwmanifest" href="http://www.cnblogs.com/yuanchenqi/wlwmanifest.xml">
<script async="" src="./index_files/analytics.js"></script><script type="text/javascript" src="./index_files/encoder.js"></script><script src="./index_files/jquery-2.2.0.min.js"></script>
<script type="text/javascript">var currentBlogApp = 'yuanchenqi', cb_enable_mathjax=false;var isLogined=false;</script>
<script src="./index_files/blog-common.js" type="text/javascript"></script>
</head>
<body>
<a name="top"></a>

<!--done-->
<div id="home">
<div id="header">
	<div id="blogTitle">
	<a id="lnkBlogLogo" href="http://www.cnblogs.com/yuanchenqi/"><img id="blogLogo" src="./index_files/logo.gif" alt="返回主页"></a>			
		
<!--done-->
<h1><a id="Header1_HeaderTitle" class="headermaintitle" href="http://www.cnblogs.com/yuanchenqi/">Yuan 先生!</a></h1>
<h2></h2>



		
	</div><!--end: blogTitle 博客的标题和副标题 -->
	<div id="navigator">
		
<ul id="navList">
<li><a id="blog_nav_sitehome" class="menu" href="http://www.cnblogs.com/">博客园</a></li>
<li><a id="blog_nav_myhome" class="menu" href="http://www.cnblogs.com/yuanchenqi/">首页</a></li>
<li><a id="blog_nav_newpost" class="menu" rel="nofollow" href="https://i.cnblogs.com/EditPosts.aspx?opt=1">新随笔</a></li>
<li></li>
<li><a id="blog_nav_rss" class="menu" href="http://www.cnblogs.com/yuanchenqi/rss">订阅</a>
<!--<a id="blog_nav_rss_image" class="aHeaderXML" href="http://www.cnblogs.com/yuanchenqi/rss"><img src="//www.cnblogs.com/images/xml.gif" alt="订阅" /></a>--></li>
<li><a id="blog_nav_admin" class="menu" rel="nofollow" href="https://i.cnblogs.com/">管理</a></li>
</ul>
		<div class="blogStats">
			
			<div id="blog_stats">
<span id="stats_post_count">随笔 - 1&nbsp; </span>
<span id="stats_article_count">文章 - 104&nbsp; </span>
<span id="stats-comment_count">评论 - 127</span>
</div>
			
		</div><!--end: blogStats -->
	</div><!--end: navigator 博客导航栏 -->
</div><!--end: header 头部 -->

<div id="main">
	<div id="mainContent">
	<div class="forFlow">
		
<div id="post_detail">
<!--done-->
<div id="topics">
	<div class="post">
		<h1 class="postTitle">
			<a id="cb_post_title_url" class="postTitle2" href="http://www.cnblogs.com/yuanchenqi/articles/5732581.html">Py西游攻关之模块</a>
		</h1>
		<div class="clear"></div>
		<div class="postBody">
			<div id="cnblogs_post_body" class="blogpost-body"><h3>模块&amp;包(<span style="color: #ff9900;">* * * * *</span>)</h3>
<h4>模块(modue)的概念：</h4>
<p>在计算机程序的开发过程中，随着程序代码越写越多，在一个文件里代码就会越来越长，越来越不容易维护。</p>
<p>为了编写可维护的代码，我们把很多函数分组，分别放到不同的文件里，这样，每个文件包含的代码就相对较少，很多编程语言都采用这种组织代码的方式。在Python中，<span style="color: #ff0000;">一个.py文件就称之为一个模块（Module）</span>。</p>
<p>使用模块有什么好处？</p>
<p>最大的好处是大大提高了代码的可维护性。</p>
<p>其次，编写代码不必从零开始。当一个模块编写完毕，就可以被其他地方引用。我们在编写程序的时候，也经常引用其他模块，包括Python内置的模块和来自第三方的模块。</p>
<p>所以，模块一共三种：</p>
<ul>
<li>python标准库</li>
<li>第三方模块</li>
<li>应用程序自定义模块</li>
</ul>
<p>另外，使用模块还可以避免函数名和变量名冲突。相同名字的函数和变量完全可以分别存在不同的模块中，因此，我们自己在编写模块时，不必考虑名字会与其他模块冲突。但是也要注意，尽量不要与内置函数名字冲突。</p>
<h4><span style="font-size: 1em;">模块导入方法</span></h4>
<p><strong>1&nbsp;import 语句</strong></p>
<div class="cnblogs_Highlighter sh-gutter">
<div><div id="highlighter_21168" class="syntaxhighlighter  python"><div class="toolbar"><span><a href="http://www.cnblogs.com/yuanchenqi/articles/5732581.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python keyword">import</code> <code class="python plain">module1[, module2[,... moduleN]</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>当我们使用import语句的时候，Python解释器是怎样找到对应的文件的呢？答案就是解释器有自己的搜索路径，存在sys.path里。　　</p>
<div class="cnblogs_Highlighter sh-gutter">
<div><div id="highlighter_928615" class="syntaxhighlighter  python"><div class="toolbar"><span><a href="http://www.cnblogs.com/yuanchenqi/articles/5732581.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python plain">['</code><code class="python string">', '</code><code class="python keyword">/</code><code class="python plain">usr</code><code class="python keyword">/</code><code class="python plain">lib</code><code class="python keyword">/</code><code class="python plain">python3.</code><code class="python value">4</code><code class="python string">', '</code><code class="python keyword">/</code><code class="python plain">usr</code><code class="python keyword">/</code><code class="python plain">lib</code><code class="python keyword">/</code><code class="python plain">python3.</code><code class="python value">4</code><code class="python keyword">/</code><code class="python plain">plat</code><code class="python keyword">-</code><code class="python plain">x86_64</code><code class="python keyword">-</code><code class="python plain">linux</code><code class="python keyword">-</code><code class="python plain">gnu', </code></div><div class="line number2 index1 alt1"><code class="python string">'/usr/lib/python3.4/lib-dynload'</code><code class="python plain">, </code><code class="python string">'/usr/local/lib/python3.4/dist-packages'</code><code class="python plain">, </code><code class="python string">'/usr/lib/python3/dist-packages'</code><code class="python plain">]　　</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>因此若像我一样在当前目录下存在与要引入模块同名的文件，就会把要引入的模块屏蔽掉。</p>
<p><strong>2 &nbsp;from…import 语句</strong></p>
<div class="cnblogs_Highlighter sh-gutter">
<div><div id="highlighter_565653" class="syntaxhighlighter  python"><div class="toolbar"><span><a href="http://www.cnblogs.com/yuanchenqi/articles/5732581.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python keyword">from</code> <code class="python plain">modname </code><code class="python keyword">import</code> <code class="python plain">name1[, name2[, ... nameN]]</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>这个声明不会把整个modulename模块导入到当前的命名空间中，只会将它里面的name1或name2单个引入到执行这个声明的模块的全局符号表。</p>
<p><strong>3 &nbsp;From…import* 语句</strong></p>
<div class="cnblogs_Highlighter sh-gutter">
<div><div id="highlighter_235998" class="syntaxhighlighter  python"><div class="toolbar"><span><a href="http://www.cnblogs.com/yuanchenqi/articles/5732581.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python keyword">from</code> <code class="python plain">modname </code><code class="python keyword">import</code> <code class="python keyword">*</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>这提供了一个简单的方法来导入一个模块中的所有项目。然而这种声明不该被过多地使用。大多数情况， Python程序员不使用这种方法，因为引入的其它来源的命名，很可能覆盖了已有的定义。</p>
<p><strong>4 运行本质　</strong></p>
<div class="cnblogs_Highlighter sh-gutter">
<div><div id="highlighter_42892" class="syntaxhighlighter  python"><div class="toolbar"><span><a href="http://www.cnblogs.com/yuanchenqi/articles/5732581.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python comments">#1 import test</code></div><div class="line number2 index1 alt1"><code class="python comments">#2 from test import add　　</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>无论1还是2，首先通过sys.path找到test.py,然后执行test脚本（全部执行），区别是1会将test这个变量名加载到名字空间，而2只会将add这个变量名加载进来。　　</p>
<h4>包(package)</h4>
<p>如果不同的人编写的模块名相同怎么办？为了避免模块名冲突，Python又引入了按目录来组织模块的方法，称为包（Package）。</p>
<p>举个例子，一个<code>abc.py</code>的文件就是一个名字叫<code>abc</code>的模块，一个<code>xyz.py</code>的文件就是一个名字叫<code>xyz</code>的模块。</p>
<p>现在，假设我们的<code>abc</code>和<code>xyz</code>这两个模块名字与其他模块冲突了，于是我们可以通过包来组织模块，避免冲突。方法是选择一个顶层包名：</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<img src="./index_files/877318-20160913071822680-1730797664.png" alt="" width="379" height="265">&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</p>
<p>引入了包以后，只要顶层的包名不与别人冲突，那所有模块都不会与别人冲突。现在，<code>view.py</code>模块的名字就变成了hello_django.app01<code>.views</code>，类似的，manage<code>.py</code>的模块名则是<span style="font-family: monospace;">hello_django.manage</span>。</p>
<p>请注意，每一个包目录下面都会有一个<code>__init__.py</code>的文件，这个文件是必须存在的，否则，Python就把这个目录当成普通目录(文件夹)，而不是一个包。<code>__init__.py</code>可以是空文件，也可以有Python代码，因为<code>__init__.py</code>本身就是一个模块，而它的模块名就是<span style="font-family: monospace;">对应包的名字</span>。</p>
<p><span style="color: #ff0000;">调用包就是执行包下的__init__.py文件</span></p>
<h4>&nbsp;注意点（important）</h4>
<p><img src="./index_files/877318-20160913072617289-1787847933.png" alt="" width="237" height="95"></p>
<p>1--------------</p>
<p>在nod1里import &nbsp;hello是找不到的，有同学说可以找到呀，那是因为你的pycharm为你把myapp这一层路径加入到了sys.path里面，所以可以找到，然而程序一旦在命令行运行，则报错。有同学问那怎么办？简单啊，自己把这个路径加进去不就OK啦：</p>
<div class="cnblogs_Highlighter sh-gutter">
<div><div id="highlighter_322639" class="syntaxhighlighter  python"><div class="toolbar"><span><a href="http://www.cnblogs.com/yuanchenqi/articles/5732581.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python keyword">import</code> <code class="python plain">sys,os</code></div><div class="line number2 index1 alt1"><code class="python plain">BASE_DIR</code><code class="python keyword">=</code><code class="python plain">os.path.dirname(os.path.dirname(os.path.abspath(__file__)))</code></div><div class="line number3 index2 alt2"><code class="python plain">sys.path.append(BASE_DIR)</code></div><div class="line number4 index3 alt1"><code class="python keyword">import</code> <code class="python plain">hello</code></div><div class="line number5 index4 alt2"><code class="python plain">hello.hello1()</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>2 --------------</p>
<div class="cnblogs_Highlighter sh-gutter">
<div><div id="highlighter_399670" class="syntaxhighlighter  python"><div class="toolbar"><span><a href="http://www.cnblogs.com/yuanchenqi/articles/5732581.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python keyword">if</code> <code class="python plain">__name__</code><code class="python keyword">=</code><code class="python keyword">=</code><code class="python string">'__main__'</code><code class="python plain">:</code></div><div class="line number2 index1 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python functions">print</code><code class="python plain">(</code><code class="python string">'ok'</code><code class="python plain">)</code></div></div></td></tr></tbody></table></div></div>
</div>
<p><strong>“Make a .py both importable and executable”</strong></p>
<p>&nbsp; &nbsp; &nbsp; 如果我们是直接执行某个.py文件的时候，该文件中那么”__name__ == '__main__'“是True,但是我们如果从另外一个.py文件通过import导入该文件的时候，这时__name__的值就是我们这个py文件的名字而不是__main__。</p>
<p>&nbsp; &nbsp; &nbsp; 这个功能还有一个用处：调试代码的时候，在”if __name__ == '__main__'“中加入一些我们的调试代码，我们可以让外部模块调用的时候不执行我们的调试代码，但是如果我们想排查问题的时候，直接执行该模块文件，调试代码能够正常运行！s</p>
<p>3 　　</p>
<p><img src="./index_files/877318-20160913143701633-1174796480.png" alt="" width="515" height="113"></p>
<div class="cnblogs_Highlighter sh-gutter">
<div><div id="highlighter_866211" class="syntaxhighlighter  python"><div class="toolbar"><span><a href="http://www.cnblogs.com/yuanchenqi/articles/5732581.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python comments">##-------------cal.py</code></div><div class="line number2 index1 alt1"><code class="python keyword">def</code> <code class="python plain">add(x,y):</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python keyword">return</code> <code class="python plain">x</code><code class="python keyword">+</code><code class="python plain">y</code></div><div class="line number5 index4 alt2"><code class="python comments">##-------------main.py</code></div><div class="line number6 index5 alt1"><code class="python keyword">import</code> <code class="python plain">cal&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="python comments">#from module import cal</code></div><div class="line number7 index6 alt2">&nbsp;</div><div class="line number8 index7 alt1"><code class="python keyword">def</code> <code class="python plain">main():</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python plain">cal.add(</code><code class="python value">1</code><code class="python plain">,</code><code class="python value">2</code><code class="python plain">)</code></div><div class="line number11 index10 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number12 index11 alt1"><code class="python comments">##--------------bin.py</code></div><div class="line number13 index12 alt2"><code class="python keyword">from</code> <code class="python plain">module </code><code class="python keyword">import</code> <code class="python plain">main</code></div><div class="line number14 index13 alt1">&nbsp;</div><div class="line number15 index14 alt2"><code class="python plain">main.main()</code></div></div></td></tr></tbody></table></div></div>
</div>
<div class="cnblogs_code" onclick="cnblogs_code_show(&#39;4a121e68-df76-4be3-a159-5c0984f7da97&#39;)"><img id="code_img_closed_4a121e68-df76-4be3-a159-5c0984f7da97" class="code_img_closed" src="./index_files/ContractedBlock.gif" alt="" style="display: none;"><img id="code_img_opened_4a121e68-df76-4be3-a159-5c0984f7da97" class="code_img_opened" style="" onclick="cnblogs_code_hide(&#39;4a121e68-df76-4be3-a159-5c0984f7da97&#39;,event)" src="./index_files/ExpandedBlockStart.gif" alt="">
<div id="cnblogs_code_open_4a121e68-df76-4be3-a159-5c0984f7da97" class="cnblogs_code_hide" style="display: block;">
<pre><span style="color: #008000;">#</span><span style="color: #008000;"> from module import cal 改成 from . import cal同样可以，这是因为bin.py是我们的执行脚本，</span><span style="color: #008000;">
#</span><span style="color: #008000;"> sys.path里有bin.py的当前环境。即/Users/yuanhao/Desktop/whaterver/project/web这层路径，</span><span style="color: #008000;">
#</span><span style="color: #008000;"> 无论import what ,  解释器都会按这个路径找。所以当执行到main.py时，import cal会找不到，因为</span><span style="color: #008000;">
#</span><span style="color: #008000;"> sys.path里没有/Users/yuanhao/Desktop/whaterver/project/web/module这个路径，而</span><span style="color: #008000;">
#</span><span style="color: #008000;">  from  module/.  import cal 时，解释器就可以找到了。</span></pre>
</div>
<span class="cnblogs_code_collapse" style="display: none;">注意</span></div>
<h3>time模块(<span style="color: #ff9900;">* * * *</span>)</h3>
<h4 id="三种时间表示">三种时间表示</h4>
<p>在Python中，通常有这几种方式来表示时间：</p>
<ul>
<li>时间戳(timestamp) ： &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;通常来说，时间戳表示的是从1970年1月1日00:00:00开始按秒计算的偏移量。我们运行“type(time.time())”，返回的是float类型。</li>
<li>格式化的时间字符串</li>
<li>元组(struct_time) &nbsp; ： &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;struct_time元组共有9个元素共九个元素:(年，月，日，时，分，秒，一年中第几周，一年中第几天，夏令时)</li>
</ul>
<div class="cnblogs_Highlighter sh-gutter">
<div><div id="highlighter_812516" class="syntaxhighlighter  python"><div class="toolbar"><span><a href="http://www.cnblogs.com/yuanchenqi/articles/5732581.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div><div class="line number42 index41 alt1">42</div><div class="line number43 index42 alt2">43</div><div class="line number44 index43 alt1">44</div><div class="line number45 index44 alt2">45</div><div class="line number46 index45 alt1">46</div><div class="line number47 index46 alt2">47</div><div class="line number48 index47 alt1">48</div><div class="line number49 index48 alt2">49</div><div class="line number50 index49 alt1">50</div><div class="line number51 index50 alt2">51</div><div class="line number52 index51 alt1">52</div><div class="line number53 index52 alt2">53</div><div class="line number54 index53 alt1">54</div><div class="line number55 index54 alt2">55</div><div class="line number56 index55 alt1">56</div><div class="line number57 index56 alt2">57</div><div class="line number58 index57 alt1">58</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python keyword">import</code> <code class="python plain">time</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="python comments"># 1 time() :返回当前时间的时间戳</code></div><div class="line number4 index3 alt1"><code class="python plain">time.time()&nbsp; </code><code class="python comments">#1473525444.037215</code></div><div class="line number5 index4 alt2">&nbsp;</div><div class="line number6 index5 alt1"><code class="python comments">#----------------------------------------------------------</code></div><div class="line number7 index6 alt2">&nbsp;</div><div class="line number8 index7 alt1"><code class="python comments"># 2 localtime([secs])</code></div><div class="line number9 index8 alt2"><code class="python comments"># 将一个时间戳转换为当前时区的struct_time。secs参数未提供，则以当前时间为准。</code></div><div class="line number10 index9 alt1"><code class="python plain">time.localtime() </code><code class="python comments">#time.struct_time(tm_year=2016, tm_mon=9, tm_mday=11, tm_hour=0,</code></div><div class="line number11 index10 alt2"><code class="python comments"># tm_min=38, tm_sec=39, tm_wday=6, tm_yday=255, tm_isdst=0)</code></div><div class="line number12 index11 alt1"><code class="python plain">time.localtime(</code><code class="python value">1473525444.037215</code><code class="python plain">)</code></div><div class="line number13 index12 alt2">&nbsp;</div><div class="line number14 index13 alt1"><code class="python comments">#----------------------------------------------------------</code></div><div class="line number15 index14 alt2">&nbsp;</div><div class="line number16 index15 alt1"><code class="python comments"># 3 gmtime([secs]) 和localtime()方法类似，gmtime()方法是将一个时间戳转换为UTC时区（0时区）的struct_time。</code></div><div class="line number17 index16 alt2">&nbsp;</div><div class="line number18 index17 alt1"><code class="python comments">#----------------------------------------------------------</code></div><div class="line number19 index18 alt2">&nbsp;</div><div class="line number20 index19 alt1"><code class="python comments"># 4 mktime(t) : 将一个struct_time转化为时间戳。</code></div><div class="line number21 index20 alt2"><code class="python functions">print</code><code class="python plain">(time.mktime(time.localtime()))</code><code class="python comments">#1473525749.0</code></div><div class="line number22 index21 alt1">&nbsp;</div><div class="line number23 index22 alt2"><code class="python comments">#----------------------------------------------------------</code></div><div class="line number24 index23 alt1">&nbsp;</div><div class="line number25 index24 alt2"><code class="python comments"># 5 asctime([t]) : 把一个表示时间的元组或者struct_time表示为这种形式：'Sun Jun 20 23:21:05 1993'。</code></div><div class="line number26 index25 alt1"><code class="python comments"># 如果没有参数，将会将time.localtime()作为参数传入。</code></div><div class="line number27 index26 alt2"><code class="python functions">print</code><code class="python plain">(time.asctime())</code><code class="python comments">#Sun Sep 11 00:43:43 2016</code></div><div class="line number28 index27 alt1">&nbsp;</div><div class="line number29 index28 alt2"><code class="python comments">#----------------------------------------------------------</code></div><div class="line number30 index29 alt1">&nbsp;</div><div class="line number31 index30 alt2"><code class="python comments"># 6 ctime([secs]) : 把一个时间戳（按秒计算的浮点数）转化为time.asctime()的形式。如果参数未给或者为</code></div><div class="line number32 index31 alt1"><code class="python comments"># None的时候，将会默认time.time()为参数。它的作用相当于time.asctime(time.localtime(secs))。</code></div><div class="line number33 index32 alt2"><code class="python functions">print</code><code class="python plain">(time.ctime())&nbsp; </code><code class="python comments"># Sun Sep 11 00:46:38 2016</code></div><div class="line number34 index33 alt1">&nbsp;</div><div class="line number35 index34 alt2"><code class="python functions">print</code><code class="python plain">(time.ctime(time.time()))&nbsp; </code><code class="python comments"># Sun Sep 11 00:46:38 2016</code></div><div class="line number36 index35 alt1">&nbsp;</div><div class="line number37 index36 alt2"><code class="python comments"># 7 strftime(format[, t]) : 把一个代表时间的元组或者struct_time（如由time.localtime()和</code></div><div class="line number38 index37 alt1"><code class="python comments"># time.gmtime()返回）转化为格式化的时间字符串。如果t未指定，将传入time.localtime()。如果元组中任何一个</code></div><div class="line number39 index38 alt2"><code class="python comments"># 元素越界，ValueError的错误将会被抛出。</code></div><div class="line number40 index39 alt1"><code class="python functions">print</code><code class="python plain">(time.strftime(</code><code class="python string">"%Y-%m-%d %X"</code><code class="python plain">, time.localtime()))</code><code class="python comments">#2016-09-11 00:49:56</code></div><div class="line number41 index40 alt2">&nbsp;</div><div class="line number42 index41 alt1"><code class="python comments"># 8 time.strptime(string[, format])</code></div><div class="line number43 index42 alt2"><code class="python comments"># 把一个格式化时间字符串转化为struct_time。实际上它和strftime()是逆操作。</code></div><div class="line number44 index43 alt1"><code class="python functions">print</code><code class="python plain">(time.strptime(</code><code class="python string">'2011-05-05 16:37:06'</code><code class="python plain">, </code><code class="python string">'%Y-%m-%d %X'</code><code class="python plain">))</code></div><div class="line number45 index44 alt2">&nbsp;</div><div class="line number46 index45 alt1"><code class="python comments">#time.struct_time(tm_year=2011, tm_mon=5, tm_mday=5, tm_hour=16, tm_min=37, tm_sec=6,</code></div><div class="line number47 index46 alt2"><code class="python comments">#&nbsp; tm_wday=3, tm_yday=125, tm_isdst=-1)</code></div><div class="line number48 index47 alt1">&nbsp;</div><div class="line number49 index48 alt2"><code class="python comments">#在这个函数中，format默认为："%a %b %d %H:%M:%S %Y"。</code></div><div class="line number50 index49 alt1">&nbsp;</div><div class="line number51 index50 alt2">&nbsp;</div><div class="line number52 index51 alt1"><code class="python comments"># 9 sleep(secs)</code></div><div class="line number53 index52 alt2"><code class="python comments"># 线程推迟指定的时间运行，单位为秒。</code></div><div class="line number54 index53 alt1">&nbsp;</div><div class="line number55 index54 alt2"><code class="python comments"># 10 clock()</code></div><div class="line number56 index55 alt1"><code class="python comments"># 这个需要注意，在不同的系统上含义不同。在UNIX系统上，它返回的是“进程时间”，它是用秒表示的浮点数（时间戳）。</code></div><div class="line number57 index56 alt2"><code class="python comments"># 而在WINDOWS中，第一次调用，返回的是进程运行的实际时间。而第二次之后的调用是自第一次调用以后到现在的运行</code></div><div class="line number58 index57 alt1"><code class="python comments"># 时间，即两次时间差。</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;<img src="./index_files/877318-20160911074627840-300139608.png" alt="" width="360" height="229"><img src="./index_files/877318-20160911074646389-1201523256.png" alt="" width="424" height="230"></p>
<div class="cnblogs_Highlighter sh-gutter">
<div><div id="highlighter_841862" class="syntaxhighlighter  python"><div class="toolbar"><span><a href="http://www.cnblogs.com/yuanchenqi/articles/5732581.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python functions">help</code><code class="python plain">(time)</code></div><div class="line number2 index1 alt1"><code class="python functions">help</code><code class="python plain">(time.asctime)</code></div></div></td></tr></tbody></table></div></div>
</div>
<h3>random模块(<span style="color: #ff9900;">* *</span>)</h3>
<div class="cnblogs_Highlighter sh-gutter">
<div><div id="highlighter_257601" class="syntaxhighlighter  python"><div class="toolbar"><span><a href="http://www.cnblogs.com/yuanchenqi/articles/5732581.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python keyword">import</code> <code class="python plain">random</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="python functions">print</code><code class="python plain">(random.random())</code><code class="python comments">#(0,1)----float</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="python functions">print</code><code class="python plain">(random.randint(</code><code class="python value">1</code><code class="python plain">,</code><code class="python value">3</code><code class="python plain">))&nbsp; </code><code class="python comments">#[1,3]</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="python functions">print</code><code class="python plain">(random.randrange(</code><code class="python value">1</code><code class="python plain">,</code><code class="python value">3</code><code class="python plain">)) </code><code class="python comments">#[1,3)</code></div><div class="line number8 index7 alt1">&nbsp;</div><div class="line number9 index8 alt2"><code class="python functions">print</code><code class="python plain">(random.choice([</code><code class="python value">1</code><code class="python plain">,</code><code class="python string">'23'</code><code class="python plain">,[</code><code class="python value">4</code><code class="python plain">,</code><code class="python value">5</code><code class="python plain">]]))</code><code class="python comments">#23</code></div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2"><code class="python functions">print</code><code class="python plain">(random.sample([</code><code class="python value">1</code><code class="python plain">,</code><code class="python string">'23'</code><code class="python plain">,[</code><code class="python value">4</code><code class="python plain">,</code><code class="python value">5</code><code class="python plain">]],</code><code class="python value">2</code><code class="python plain">))</code><code class="python comments">#[[4, 5], '23']</code></div><div class="line number12 index11 alt1">&nbsp;</div><div class="line number13 index12 alt2"><code class="python functions">print</code><code class="python plain">(random.uniform(</code><code class="python value">1</code><code class="python plain">,</code><code class="python value">3</code><code class="python plain">))</code><code class="python comments">#1.927109612082716</code></div><div class="line number14 index13 alt1">&nbsp;</div><div class="line number15 index14 alt2">&nbsp;</div><div class="line number16 index15 alt1"><code class="python plain">item</code><code class="python keyword">=</code><code class="python plain">[</code><code class="python value">1</code><code class="python plain">,</code><code class="python value">3</code><code class="python plain">,</code><code class="python value">5</code><code class="python plain">,</code><code class="python value">7</code><code class="python plain">,</code><code class="python value">9</code><code class="python plain">]</code></div><div class="line number17 index16 alt2"><code class="python plain">random.shuffle(item)</code></div><div class="line number18 index17 alt1"><code class="python functions">print</code><code class="python plain">(item)</code></div></div></td></tr></tbody></table></div></div>
</div>
<div class="cnblogs_code" onclick="cnblogs_code_show(&#39;9e8723ec-4abd-4a1e-972d-fbfcdb63e10d&#39;)"><img id="code_img_closed_9e8723ec-4abd-4a1e-972d-fbfcdb63e10d" class="code_img_closed" src="./index_files/ContractedBlock.gif" alt="" style="display: none;"><img id="code_img_opened_9e8723ec-4abd-4a1e-972d-fbfcdb63e10d" class="code_img_opened" style="" onclick="cnblogs_code_hide(&#39;9e8723ec-4abd-4a1e-972d-fbfcdb63e10d&#39;,event)" src="./index_files/ExpandedBlockStart.gif" alt="">
<div id="cnblogs_code_open_9e8723ec-4abd-4a1e-972d-fbfcdb63e10d" class="cnblogs_code_hide" style="display: block;"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./index_files/copycode.gif" alt="复制代码"></a></span></div>
<pre><span style="color: #000000;">import random

def v_code():

    code </span>= <span style="color: #800000;">''</span>
    <span style="color: #0000ff;">for</span> i <span style="color: #0000ff;">in</span> range(<span style="color: #800080;">5</span><span style="color: #000000;">):

        num</span>=random.randint(<span style="color: #800080;">0</span>,<span style="color: #800080;">9</span><span style="color: #000000;">)
        alf</span>=chr(random.randint(<span style="color: #800080;">65</span>,<span style="color: #800080;">90</span><span style="color: #000000;">))
        add</span>=<span style="color: #000000;">random.choice([num,alf])
        code </span>+=<span style="color: #000000;"> str(add)
    </span><span style="color: #0000ff;">return</span><span style="color: #000000;"> code

print(v_code())</span></pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./index_files/copycode.gif" alt="复制代码"></a></span></div></div>
<span class="cnblogs_code_collapse" style="display: none;">验证码</span></div>
<h3>&nbsp;os模块(<span style="color: #ff9900;">* * * *</span>)</h3>
<p>os模块是与操作系统交互的一个接口</p>
<div class="cnblogs_code" onclick="cnblogs_code_show(&#39;4f750c92-b2b4-49fb-b7e1-f86434b0f6d4&#39;)"><img id="code_img_closed_4f750c92-b2b4-49fb-b7e1-f86434b0f6d4" class="code_img_closed" src="./index_files/ContractedBlock.gif" alt="" style="display: none;"><img id="code_img_opened_4f750c92-b2b4-49fb-b7e1-f86434b0f6d4" class="code_img_opened" style="" onclick="cnblogs_code_hide(&#39;4f750c92-b2b4-49fb-b7e1-f86434b0f6d4&#39;,event)" src="./index_files/ExpandedBlockStart.gif" alt="">
<div id="cnblogs_code_open_4f750c92-b2b4-49fb-b7e1-f86434b0f6d4" class="cnblogs_code_hide" style="display: block;"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./index_files/copycode.gif" alt="复制代码"></a></span></div>
<pre><span style="color: #000000;">os.getcwd() 获取当前工作目录，即当前python脚本工作的目录路径
os.chdir(</span><span style="color: #800000;">"</span><span style="color: #800000;">dirname</span><span style="color: #800000;">"</span><span style="color: #000000;">)  改变当前脚本工作目录；相当于shell下cd
os.curdir  返回当前目录: (</span><span style="color: #800000;">'</span><span style="color: #800000;">.</span><span style="color: #800000;">'</span><span style="color: #000000;">)
os.pardir  获取当前目录的父目录字符串名：(</span><span style="color: #800000;">'</span><span style="color: #800000;">..</span><span style="color: #800000;">'</span><span style="color: #000000;">)
os.makedirs(</span><span style="color: #800000;">'</span><span style="color: #800000;">dirname1/dirname2</span><span style="color: #800000;">'</span><span style="color: #000000;">)    可生成多层递归目录
os.removedirs(</span><span style="color: #800000;">'</span><span style="color: #800000;">dirname1</span><span style="color: #800000;">'</span><span style="color: #000000;">)    若目录为空，则删除，并递归到上一级目录，如若也为空，则删除，依此类推
os.mkdir(</span><span style="color: #800000;">'</span><span style="color: #800000;">dirname</span><span style="color: #800000;">'</span><span style="color: #000000;">)    生成单级目录；相当于shell中mkdir dirname
os.rmdir(</span><span style="color: #800000;">'</span><span style="color: #800000;">dirname</span><span style="color: #800000;">'</span><span style="color: #000000;">)    删除单级空目录，若目录不为空则无法删除，报错；相当于shell中rmdir dirname
os.listdir(</span><span style="color: #800000;">'</span><span style="color: #800000;">dirname</span><span style="color: #800000;">'</span><span style="color: #000000;">)    列出指定目录下的所有文件和子目录，包括隐藏文件，并以列表方式打印
os.remove()  删除一个文件
os.rename(</span><span style="color: #800000;">"</span><span style="color: #800000;">oldname</span><span style="color: #800000;">"</span>,<span style="color: #800000;">"</span><span style="color: #800000;">newname</span><span style="color: #800000;">"</span>)  重命名文件/<span style="color: #000000;">目录
os.stat(</span><span style="color: #800000;">'</span><span style="color: #800000;">path/filename</span><span style="color: #800000;">'</span>)  获取文件/<span style="color: #000000;">目录信息
os.sep    输出操作系统特定的路径分隔符，win下为</span><span style="color: #800000;">"</span><span style="color: #800000;">\\</span><span style="color: #800000;">"</span>,Linux下为<span style="color: #800000;">"</span><span style="color: #800000;">/</span><span style="color: #800000;">"</span><span style="color: #000000;">
os.linesep    输出当前平台使用的行终止符，win下为</span><span style="color: #800000;">"</span><span style="color: #800000;">\t\n</span><span style="color: #800000;">"</span>,Linux下为<span style="color: #800000;">"</span><span style="color: #800000;">\n</span><span style="color: #800000;">"</span><span style="color: #000000;">
os.pathsep    输出用于分割文件路径的字符串 win下为;,Linux下为:
os.name    输出字符串指示当前使用平台。win</span>-&gt;<span style="color: #800000;">'</span><span style="color: #800000;">nt</span><span style="color: #800000;">'</span>; Linux-&gt;<span style="color: #800000;">'</span><span style="color: #800000;">posix</span><span style="color: #800000;">'</span><span style="color: #000000;">
os.system(</span><span style="color: #800000;">"</span><span style="color: #800000;">bash command</span><span style="color: #800000;">"</span><span style="color: #000000;">)  运行shell命令，直接显示
os.environ  获取系统环境变量
os.path.abspath(path)  返回path规范化的绝对路径
os.path.split(path)  将path分割成目录和文件名二元组返回
os.path.dirname(path)  返回path的目录。其实就是os.path.split(path)的第一个元素
os.path.basename(path)  返回path最后的文件名。如何path以／或\结尾，那么就会返回空值。即os.path.split(path)的第二个元素
os.path.exists(path)  如果path存在，返回True；如果path不存在，返回False
os.path.isabs(path)  如果path是绝对路径，返回True
os.path.isfile(path)  如果path是一个存在的文件，返回True。否则返回False
os.path.isdir(path)  如果path是一个存在的目录，则返回True。否则返回False
os.path.join(path1[, path2[, ...]])  将多个路径组合后返回，第一个绝对路径之前的参数将被忽略
os.path.getatime(path)  返回path所指向的文件或者目录的最后存取时间
os.path.getmtime(path)  返回path所指向的文件或者目录的最后修改时间</span></pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./index_files/copycode.gif" alt="复制代码"></a></span></div></div>
<span class="cnblogs_code_collapse" style="display: none;">View Code</span></div>
<h3>sys模块(<span style="color: #ff9900;">* * *</span>)</h3>
<div class="cnblogs_Highlighter sh-gutter">
<div><div id="highlighter_117374" class="syntaxhighlighter  python"><div class="toolbar"><span><a href="http://www.cnblogs.com/yuanchenqi/articles/5732581.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python plain">sys.argv&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 命令行参数</code><code class="python functions">List</code><code class="python plain">，第一个元素是程序本身路径</code></div><div class="line number2 index1 alt1"><code class="python plain">sys.exit(n)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 退出程序，正常退出时exit(</code><code class="python value">0</code><code class="python plain">)</code></div><div class="line number3 index2 alt2"><code class="python plain">sys.version&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 获取Python解释程序的版本信息</code></div><div class="line number4 index3 alt1"><code class="python plain">sys.maxint&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 最大的</code><code class="python functions">Int</code><code class="python plain">值</code></div><div class="line number5 index4 alt2"><code class="python plain">sys.path&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 返回模块的搜索路径，初始化时使用PYTHONPATH环境变量的值</code></div><div class="line number6 index5 alt1"><code class="python plain">sys.platform&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 返回操作系统平台名称</code></div></div></td></tr></tbody></table></div></div>
</div>
<p><strong>进度条：</strong></p>
<div class="cnblogs_code" onclick="cnblogs_code_show(&#39;8fb0c4c7-3fbd-452a-82dc-e793d910b6f8&#39;)"><img id="code_img_closed_8fb0c4c7-3fbd-452a-82dc-e793d910b6f8" class="code_img_closed" src="./index_files/ContractedBlock.gif" alt="" style="display: none;"><img id="code_img_opened_8fb0c4c7-3fbd-452a-82dc-e793d910b6f8" class="code_img_opened" style="" onclick="cnblogs_code_hide(&#39;8fb0c4c7-3fbd-452a-82dc-e793d910b6f8&#39;,event)" src="./index_files/ExpandedBlockStart.gif" alt="">
<div id="cnblogs_code_open_8fb0c4c7-3fbd-452a-82dc-e793d910b6f8" class="cnblogs_code_hide" style="display: block;">
<pre><span style="color: #0000ff;">import</span><span style="color: #000000;"> sys,time
</span><span style="color: #0000ff;">for</span> i <span style="color: #0000ff;">in</span> range(10<span style="color: #000000;">):
    sys.stdout.write(</span><span style="color: #800000;">'</span><span style="color: #800000;">#</span><span style="color: #800000;">'</span><span style="color: #000000;">)
    time.sleep(</span>1<span style="color: #000000;">)
    sys.stdout.flush()</span></pre>
</div>
<span class="cnblogs_code_collapse" style="display: none;">View Code</span></div>
<h3>json &amp; pickle(<span style="color: #ff9900;">* * * *</span>)</h3>
<p>之前我们学习过用eval内置方法可以将一个字符串转成python对象，不过，eval方法是有局限性的，对于普通的数据类型，json.loads和eval都能用，但遇到特殊类型的时候，eval就不管用了,所以eval的重点还是通常用来执行一个字符串表达式，并返回表达式的值。</p>
<div class="cnblogs_Highlighter sh-gutter">
<div><div id="highlighter_993972" class="syntaxhighlighter  python"><div class="toolbar"><span><a href="http://www.cnblogs.com/yuanchenqi/articles/5732581.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python keyword">import</code> <code class="python plain">json</code></div><div class="line number2 index1 alt1"><code class="python plain">x</code><code class="python keyword">=</code><code class="python string">"[null,true,false,1]"</code></div><div class="line number3 index2 alt2"><code class="python functions">print</code><code class="python plain">(</code><code class="python functions">eval</code><code class="python plain">(x))</code></div><div class="line number4 index3 alt1"><code class="python functions">print</code><code class="python plain">(json.loads(x))</code></div></div></td></tr></tbody></table></div></div>
</div>
<h4>什么是序列化？</h4>
<p>我们把对象(变量)从内存中变成可存储或传输的过程称之为序列化，在Python中叫pickling，在其他语言中也被称之为serialization，marshalling，flattening等等，都是一个意思。</p>
<p>序列化之后，就可以把序列化后的内容写入磁盘，或者通过网络传输到别的机器上。</p>
<p>反过来，把变量内容从序列化的对象重新读到内存里称之为反序列化，即unpickling。</p>
<h4>json</h4>
<p>如果我们要在不同的编程语言之间传递对象，就必须把对象序列化为标准格式，比如XML，但更好的方法是序列化为JSON，因为JSON表示出来就是一个字符串，可以被所有语言读取，也可以方便地存储到磁盘或者通过网络传输。JSON不仅是标准格式，并且比XML更快，而且可以直接在Web页面中读取，非常方便。</p>
<p>JSON表示的对象就是标准的JavaScript语言的对象，JSON和Python内置的数据类型对应如下：</p>
<p><img src="./index_files/877318-20160911105642628-530508765.png" alt="" width="586" height="190"></p>
<div class="cnblogs_Highlighter sh-gutter">
<div><div id="highlighter_542187" class="syntaxhighlighter  python"><div class="toolbar"><span><a href="http://www.cnblogs.com/yuanchenqi/articles/5732581.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python comments">#----------------------------序列化</code></div><div class="line number2 index1 alt1"><code class="python keyword">import</code> <code class="python plain">json</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="python plain">dic</code><code class="python keyword">=</code><code class="python plain">{</code><code class="python string">'name'</code><code class="python plain">:</code><code class="python string">'alvin'</code><code class="python plain">,</code><code class="python string">'age'</code><code class="python plain">:</code><code class="python value">23</code><code class="python plain">,</code><code class="python string">'sex'</code><code class="python plain">:</code><code class="python string">'male'</code><code class="python plain">}</code></div><div class="line number5 index4 alt2"><code class="python functions">print</code><code class="python plain">(</code><code class="python functions">type</code><code class="python plain">(dic))</code><code class="python comments">#&lt;class 'dict'&gt;</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="python plain">j</code><code class="python keyword">=</code><code class="python plain">json.dumps(dic)</code></div><div class="line number8 index7 alt1"><code class="python functions">print</code><code class="python plain">(</code><code class="python functions">type</code><code class="python plain">(j))</code><code class="python comments">#&lt;class 'str'&gt;</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2"><code class="python plain">f</code><code class="python keyword">=</code><code class="python functions">open</code><code class="python plain">(</code><code class="python string">'序列化对象'</code><code class="python plain">,</code><code class="python string">'w'</code><code class="python plain">)</code></div><div class="line number12 index11 alt1"><code class="python plain">f.write(j)&nbsp; </code><code class="python comments">#-------------------等价于json.dump(dic,f)</code></div><div class="line number13 index12 alt2"><code class="python plain">f.close()</code></div><div class="line number14 index13 alt1"><code class="python comments">#-----------------------------反序列化&lt;br&gt;</code></div><div class="line number15 index14 alt2"><code class="python keyword">import</code> <code class="python plain">json</code></div><div class="line number16 index15 alt1"><code class="python plain">f</code><code class="python keyword">=</code><code class="python functions">open</code><code class="python plain">(</code><code class="python string">'序列化对象'</code><code class="python plain">)</code></div><div class="line number17 index16 alt2"><code class="python plain">data</code><code class="python keyword">=</code><code class="python plain">json.loads(f.read())</code><code class="python comments">#&nbsp; 等价于data=json.load(f)</code></div></div></td></tr></tbody></table></div></div>
</div>
<div class="cnblogs_code" onclick="cnblogs_code_show(&#39;6244adc6-df47-4a55-9eab-4ffb7dbbb58b&#39;)"><img id="code_img_closed_6244adc6-df47-4a55-9eab-4ffb7dbbb58b" class="code_img_closed" src="./index_files/ContractedBlock.gif" alt="" style="display: none;"><img id="code_img_opened_6244adc6-df47-4a55-9eab-4ffb7dbbb58b" class="code_img_opened" style="" onclick="cnblogs_code_hide(&#39;6244adc6-df47-4a55-9eab-4ffb7dbbb58b&#39;,event)" src="./index_files/ExpandedBlockStart.gif" alt="">
<div id="cnblogs_code_open_6244adc6-df47-4a55-9eab-4ffb7dbbb58b" class="cnblogs_code_hide" style="display: block;"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./index_files/copycode.gif" alt="复制代码"></a></span></div>
<pre><span style="color: #0000ff;">import</span><span style="color: #000000;"> json
</span><span style="color: #008000;">#</span><span style="color: #008000;">dct="{'1':111}"#json 不认单引号</span><span style="color: #008000;">
#</span><span style="color: #008000;">dct=str({"1":111})#报错,因为生成的数据还是单引号:{'one': 1}</span>
<span style="color: #000000;">
dct</span>=<span style="color: #800000;">'</span><span style="color: #800000;">{"1":"111"}</span><span style="color: #800000;">'</span>
<span style="color: #0000ff;">print</span><span style="color: #000000;">(json.loads(dct))

</span><span style="color: #008000;">#</span><span style="color: #008000;">conclusion:</span><span style="color: #008000;">
#</span><span style="color: #008000;">        无论数据是怎样创建的，只要满足json格式，就可以json.loads出来,不一定非要dumps的数据才能loads</span></pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./index_files/copycode.gif" alt="复制代码"></a></span></div></div>
<span class="cnblogs_code_collapse" style="display: none;">注意点</span></div>
<h4>pickle　</h4>
<div class="cnblogs_Highlighter sh-gutter">
<div><div id="highlighter_800921" class="syntaxhighlighter  python"><div class="toolbar"><span><a href="http://www.cnblogs.com/yuanchenqi/articles/5732581.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python comments">##----------------------------序列化</code></div><div class="line number2 index1 alt1"><code class="python keyword">import</code> <code class="python plain">pickle</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="python plain">dic</code><code class="python keyword">=</code><code class="python plain">{</code><code class="python string">'name'</code><code class="python plain">:</code><code class="python string">'alvin'</code><code class="python plain">,</code><code class="python string">'age'</code><code class="python plain">:</code><code class="python value">23</code><code class="python plain">,</code><code class="python string">'sex'</code><code class="python plain">:</code><code class="python string">'male'</code><code class="python plain">}</code></div><div class="line number5 index4 alt2">&nbsp;</div><div class="line number6 index5 alt1"><code class="python functions">print</code><code class="python plain">(</code><code class="python functions">type</code><code class="python plain">(dic))</code><code class="python comments">#&lt;class 'dict'&gt;</code></div><div class="line number7 index6 alt2">&nbsp;</div><div class="line number8 index7 alt1"><code class="python plain">j</code><code class="python keyword">=</code><code class="python plain">pickle.dumps(dic)</code></div><div class="line number9 index8 alt2"><code class="python functions">print</code><code class="python plain">(</code><code class="python functions">type</code><code class="python plain">(j))</code><code class="python comments">#&lt;class 'bytes'&gt;</code></div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2">&nbsp;</div><div class="line number12 index11 alt1"><code class="python plain">f</code><code class="python keyword">=</code><code class="python functions">open</code><code class="python plain">(</code><code class="python string">'序列化对象_pickle'</code><code class="python plain">,</code><code class="python string">'wb'</code><code class="python plain">)</code><code class="python comments">#注意是w是写入str,wb是写入bytes,j是'bytes'</code></div><div class="line number13 index12 alt2"><code class="python plain">f.write(j)&nbsp; </code><code class="python comments">#-------------------等价于pickle.dump(dic,f)</code></div><div class="line number14 index13 alt1">&nbsp;</div><div class="line number15 index14 alt2"><code class="python plain">f.close()</code></div><div class="line number16 index15 alt1"><code class="python comments">#-------------------------反序列化</code></div><div class="line number17 index16 alt2"><code class="python keyword">import</code> <code class="python plain">pickle</code></div><div class="line number18 index17 alt1"><code class="python plain">f</code><code class="python keyword">=</code><code class="python functions">open</code><code class="python plain">(</code><code class="python string">'序列化对象_pickle'</code><code class="python plain">,</code><code class="python string">'rb'</code><code class="python plain">)</code></div><div class="line number19 index18 alt2">&nbsp;</div><div class="line number20 index19 alt1"><code class="python plain">data</code><code class="python keyword">=</code><code class="python plain">pickle.loads(f.read())</code><code class="python comments">#&nbsp; 等价于data=pickle.load(f)</code></div><div class="line number21 index20 alt2">&nbsp;</div><div class="line number22 index21 alt1">&nbsp;</div><div class="line number23 index22 alt2"><code class="python functions">print</code><code class="python plain">(data[</code><code class="python string">'age'</code><code class="python plain">])&nbsp; &nbsp;&nbsp;</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>&nbsp; &nbsp; &nbsp; Pickle的问题和所有其他编程语言特有的序列化问题一样，就是它只能用于Python，并且可能不同版本的Python彼此都不兼容，因此，只能用Pickle保存那些不重要的数据，不能成功地反序列化也没关系。</p>
<h3>shelve模块(<span style="color: #ff9900;">* * *</span>)</h3>
<p>&nbsp;shelve模块比pickle模块简单，只有一个open函数，返回类似字典的对象，可读可写;key必须为字符串，而值可以是python所支持的数据类型</p>
<div class="cnblogs_Highlighter sh-gutter">
<div><div id="highlighter_454767" class="syntaxhighlighter  python"><div class="toolbar"><span><a href="http://www.cnblogs.com/yuanchenqi/articles/5732581.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python keyword">import</code> <code class="python plain">shelve</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="python plain">f </code><code class="python keyword">=</code> <code class="python plain">shelve.</code><code class="python functions">open</code><code class="python plain">(r</code><code class="python string">'shelve.txt'</code><code class="python plain">)</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="python comments"># f['stu1_info']={'name':'alex','age':'18'}</code></div><div class="line number6 index5 alt1"><code class="python comments"># f['stu2_info']={'name':'alvin','age':'20'}</code></div><div class="line number7 index6 alt2"><code class="python comments"># f['school_info']={'website':'oldboyedu.com','city':'beijing'}</code></div><div class="line number8 index7 alt1"><code class="python comments">#</code></div><div class="line number9 index8 alt2"><code class="python comments">#</code></div><div class="line number10 index9 alt1"><code class="python comments"># f.close()</code></div><div class="line number11 index10 alt2">&nbsp;</div><div class="line number12 index11 alt1"><code class="python functions">print</code><code class="python plain">(f.get(</code><code class="python string">'stu_info'</code><code class="python plain">)[</code><code class="python string">'age'</code><code class="python plain">])</code></div></div></td></tr></tbody></table></div></div>
</div>
<h3>xml模块(<span style="color: #ff9900;">* *</span>)</h3>
<p>xml是实现不同语言或程序之间进行数据交换的协议，跟json差不多，但json使用起来更简单，不过，古时候，在json还没诞生的黑暗年代，大家只能选择用xml呀，至今很多传统公司如金融行业的很多系统的接口还主要是xml。</p>
<p>xml的格式如下，就是通过&lt;&gt;节点来区别数据结构的:</p>
<div class="cnblogs_code" onclick="cnblogs_code_show(&#39;b5598d97-82c9-4df9-8ade-ff053a189435&#39;)"><img id="code_img_closed_b5598d97-82c9-4df9-8ade-ff053a189435" class="code_img_closed" src="./index_files/ContractedBlock.gif" alt="" style="display: none;"><img id="code_img_opened_b5598d97-82c9-4df9-8ade-ff053a189435" class="code_img_opened" style="" onclick="cnblogs_code_hide(&#39;b5598d97-82c9-4df9-8ade-ff053a189435&#39;,event)" src="./index_files/ExpandedBlockStart.gif" alt="">
<div id="cnblogs_code_open_b5598d97-82c9-4df9-8ade-ff053a189435" class="cnblogs_code_hide" style="display: block;"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./index_files/copycode.gif" alt="复制代码"></a></span></div>
<pre>&lt;?xml version=<span style="color: #800000;">"</span><span style="color: #800000;">1.0</span><span style="color: #800000;">"</span>?&gt;
&lt;data&gt;
    &lt;country name=<span style="color: #800000;">"</span><span style="color: #800000;">Liechtenstein</span><span style="color: #800000;">"</span>&gt;
        &lt;rank updated=<span style="color: #800000;">"</span><span style="color: #800000;">yes</span><span style="color: #800000;">"</span>&gt;2&lt;/rank&gt;
        &lt;year&gt;2008&lt;/year&gt;
        &lt;gdppc&gt;141100&lt;/gdppc&gt;
        &lt;neighbor name=<span style="color: #800000;">"</span><span style="color: #800000;">Austria</span><span style="color: #800000;">"</span> direction=<span style="color: #800000;">"</span><span style="color: #800000;">E</span><span style="color: #800000;">"</span>/&gt;
        &lt;neighbor name=<span style="color: #800000;">"</span><span style="color: #800000;">Switzerland</span><span style="color: #800000;">"</span> direction=<span style="color: #800000;">"</span><span style="color: #800000;">W</span><span style="color: #800000;">"</span>/&gt;
    &lt;/country&gt;
    &lt;country name=<span style="color: #800000;">"</span><span style="color: #800000;">Singapore</span><span style="color: #800000;">"</span>&gt;
        &lt;rank updated=<span style="color: #800000;">"</span><span style="color: #800000;">yes</span><span style="color: #800000;">"</span>&gt;5&lt;/rank&gt;
        &lt;year&gt;2011&lt;/year&gt;
        &lt;gdppc&gt;59900&lt;/gdppc&gt;
        &lt;neighbor name=<span style="color: #800000;">"</span><span style="color: #800000;">Malaysia</span><span style="color: #800000;">"</span> direction=<span style="color: #800000;">"</span><span style="color: #800000;">N</span><span style="color: #800000;">"</span>/&gt;
    &lt;/country&gt;
    &lt;country name=<span style="color: #800000;">"</span><span style="color: #800000;">Panama</span><span style="color: #800000;">"</span>&gt;
        &lt;rank updated=<span style="color: #800000;">"</span><span style="color: #800000;">yes</span><span style="color: #800000;">"</span>&gt;69&lt;/rank&gt;
        &lt;year&gt;2011&lt;/year&gt;
        &lt;gdppc&gt;13600&lt;/gdppc&gt;
        &lt;neighbor name=<span style="color: #800000;">"</span><span style="color: #800000;">Costa Rica</span><span style="color: #800000;">"</span> direction=<span style="color: #800000;">"</span><span style="color: #800000;">W</span><span style="color: #800000;">"</span>/&gt;
        &lt;neighbor name=<span style="color: #800000;">"</span><span style="color: #800000;">Colombia</span><span style="color: #800000;">"</span> direction=<span style="color: #800000;">"</span><span style="color: #800000;">E</span><span style="color: #800000;">"</span>/&gt;
    &lt;/country&gt;
&lt;/data&gt;</pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./index_files/copycode.gif" alt="复制代码"></a></span></div></div>
<span class="cnblogs_code_collapse" style="display: none;">xml数据</span></div>
<p>xml协议在各个语言里的都 是支持的，在python中可以用以下模块操作xml：</p>
<div class="cnblogs_code" onclick="cnblogs_code_show(&#39;0e0df7d9-2ae3-4adf-b187-9063ea8aab3d&#39;)"><img id="code_img_closed_0e0df7d9-2ae3-4adf-b187-9063ea8aab3d" class="code_img_closed" src="./index_files/ContractedBlock.gif" alt="" style="display: none;"><img id="code_img_opened_0e0df7d9-2ae3-4adf-b187-9063ea8aab3d" class="code_img_opened" style="" onclick="cnblogs_code_hide(&#39;0e0df7d9-2ae3-4adf-b187-9063ea8aab3d&#39;,event)" src="./index_files/ExpandedBlockStart.gif" alt="">
<div id="cnblogs_code_open_0e0df7d9-2ae3-4adf-b187-9063ea8aab3d" class="cnblogs_code_hide" style="display: block;"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./index_files/copycode.gif" alt="复制代码"></a></span></div>
<pre><span style="color: #0000ff;">import</span><span style="color: #000000;"> xml.etree.ElementTree as ET
 
tree </span>= ET.parse(<span style="color: #800000;">"</span><span style="color: #800000;">xmltest.xml</span><span style="color: #800000;">"</span><span style="color: #000000;">)
root </span>=<span style="color: #000000;"> tree.getroot()
</span><span style="color: #0000ff;">print</span><span style="color: #000000;">(root.tag)
 
</span><span style="color: #008000;">#</span><span style="color: #008000;">遍历xml文档</span>
<span style="color: #0000ff;">for</span> child <span style="color: #0000ff;">in</span><span style="color: #000000;"> root:
    </span><span style="color: #0000ff;">print</span><span style="color: #000000;">(child.tag, child.attrib)
    </span><span style="color: #0000ff;">for</span> i <span style="color: #0000ff;">in</span><span style="color: #000000;"> child:
        </span><span style="color: #0000ff;">print</span><span style="color: #000000;">(i.tag,i.text)
 
</span><span style="color: #008000;">#</span><span style="color: #008000;">只遍历year 节点</span>
<span style="color: #0000ff;">for</span> node <span style="color: #0000ff;">in</span> root.iter(<span style="color: #800000;">'</span><span style="color: #800000;">year</span><span style="color: #800000;">'</span><span style="color: #000000;">):
    </span><span style="color: #0000ff;">print</span><span style="color: #000000;">(node.tag,node.text)
</span><span style="color: #008000;">#</span><span style="color: #008000;">---------------------------------------</span>

<span style="color: #0000ff;">import</span><span style="color: #000000;"> xml.etree.ElementTree as ET
 
tree </span>= ET.parse(<span style="color: #800000;">"</span><span style="color: #800000;">xmltest.xml</span><span style="color: #800000;">"</span><span style="color: #000000;">)
root </span>=<span style="color: #000000;"> tree.getroot()
 
</span><span style="color: #008000;">#</span><span style="color: #008000;">修改</span>
<span style="color: #0000ff;">for</span> node <span style="color: #0000ff;">in</span> root.iter(<span style="color: #800000;">'</span><span style="color: #800000;">year</span><span style="color: #800000;">'</span><span style="color: #000000;">):
    new_year </span>= int(node.text) + 1<span style="color: #000000;">
    node.text </span>=<span style="color: #000000;"> str(new_year)
    node.set(</span><span style="color: #800000;">"</span><span style="color: #800000;">updated</span><span style="color: #800000;">"</span>,<span style="color: #800000;">"</span><span style="color: #800000;">yes</span><span style="color: #800000;">"</span><span style="color: #000000;">)
 
tree.write(</span><span style="color: #800000;">"</span><span style="color: #800000;">xmltest.xml</span><span style="color: #800000;">"</span><span style="color: #000000;">)
 
 
</span><span style="color: #008000;">#</span><span style="color: #008000;">删除node</span>
<span style="color: #0000ff;">for</span> country <span style="color: #0000ff;">in</span> root.findall(<span style="color: #800000;">'</span><span style="color: #800000;">country</span><span style="color: #800000;">'</span><span style="color: #000000;">):
   rank </span>= int(country.find(<span style="color: #800000;">'</span><span style="color: #800000;">rank</span><span style="color: #800000;">'</span><span style="color: #000000;">).text)
   </span><span style="color: #0000ff;">if</span> rank &gt; 50<span style="color: #000000;">:
     root.remove(country)
 
tree.write(</span><span style="color: #800000;">'</span><span style="color: #800000;">output.xml</span><span style="color: #800000;">'</span>)</pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./index_files/copycode.gif" alt="复制代码"></a></span></div></div>
<span class="cnblogs_code_collapse" style="display: none;">View Code</span></div>
<p>自己创建xml文档：</p>
<div class="cnblogs_code" onclick="cnblogs_code_show(&#39;5a1693c2-27ac-45c8-ae0e-183f3b029d7d&#39;)"><img id="code_img_closed_5a1693c2-27ac-45c8-ae0e-183f3b029d7d" class="code_img_closed" src="./index_files/ContractedBlock.gif" alt="" style="display: none;"><img id="code_img_opened_5a1693c2-27ac-45c8-ae0e-183f3b029d7d" class="code_img_opened" style="" onclick="cnblogs_code_hide(&#39;5a1693c2-27ac-45c8-ae0e-183f3b029d7d&#39;,event)" src="./index_files/ExpandedBlockStart.gif" alt="">
<div id="cnblogs_code_open_5a1693c2-27ac-45c8-ae0e-183f3b029d7d" class="cnblogs_code_hide" style="display: block;"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./index_files/copycode.gif" alt="复制代码"></a></span></div>
<pre><span style="color: #0000ff;">import</span><span style="color: #000000;"> xml.etree.ElementTree as ET
 
 
new_xml </span>= ET.Element(<span style="color: #800000;">"</span><span style="color: #800000;">namelist</span><span style="color: #800000;">"</span><span style="color: #000000;">)
name </span>= ET.SubElement(new_xml,<span style="color: #800000;">"</span><span style="color: #800000;">name</span><span style="color: #800000;">"</span>,attrib={<span style="color: #800000;">"</span><span style="color: #800000;">enrolled</span><span style="color: #800000;">"</span>:<span style="color: #800000;">"</span><span style="color: #800000;">yes</span><span style="color: #800000;">"</span><span style="color: #000000;">})
age </span>= ET.SubElement(name,<span style="color: #800000;">"</span><span style="color: #800000;">age</span><span style="color: #800000;">"</span>,attrib={<span style="color: #800000;">"</span><span style="color: #800000;">checked</span><span style="color: #800000;">"</span>:<span style="color: #800000;">"</span><span style="color: #800000;">no</span><span style="color: #800000;">"</span><span style="color: #000000;">})
sex </span>= ET.SubElement(name,<span style="color: #800000;">"</span><span style="color: #800000;">sex</span><span style="color: #800000;">"</span><span style="color: #000000;">)
sex.text </span>= <span style="color: #800000;">'</span><span style="color: #800000;">33</span><span style="color: #800000;">'</span><span style="color: #000000;">
name2 </span>= ET.SubElement(new_xml,<span style="color: #800000;">"</span><span style="color: #800000;">name</span><span style="color: #800000;">"</span>,attrib={<span style="color: #800000;">"</span><span style="color: #800000;">enrolled</span><span style="color: #800000;">"</span>:<span style="color: #800000;">"</span><span style="color: #800000;">no</span><span style="color: #800000;">"</span><span style="color: #000000;">})
age </span>= ET.SubElement(name2,<span style="color: #800000;">"</span><span style="color: #800000;">age</span><span style="color: #800000;">"</span><span style="color: #000000;">)
age.text </span>= <span style="color: #800000;">'</span><span style="color: #800000;">19</span><span style="color: #800000;">'</span><span style="color: #000000;">
 
et </span>= ET.ElementTree(new_xml) <span style="color: #008000;">#</span><span style="color: #008000;">生成文档对象</span>
et.write(<span style="color: #800000;">"</span><span style="color: #800000;">test.xml</span><span style="color: #800000;">"</span>, encoding=<span style="color: #800000;">"</span><span style="color: #800000;">utf-8</span><span style="color: #800000;">"</span>,xml_declaration=<span style="color: #000000;">True)
 
ET.dump(new_xml) </span><span style="color: #008000;">#</span><span style="color: #008000;">打印生成的格式</span></pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./index_files/copycode.gif" alt="复制代码"></a></span></div></div>
<span class="cnblogs_code_collapse" style="display: none;">创建xml文档</span></div>
<h3><strong>configparser模块(<span style="color: #ff9900;">* *</span>)</strong></h3>
<p><strong>来看一个好多软件的常见文档格式如下：</strong></p>
<div class="cnblogs_Highlighter sh-gutter">
<div><div id="highlighter_541292" class="syntaxhighlighter  python"><div class="toolbar"><span><a href="http://www.cnblogs.com/yuanchenqi/articles/5732581.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python plain">[DEFAULT]</code></div><div class="line number2 index1 alt1"><code class="python plain">ServerAliveInterval </code><code class="python keyword">=</code> <code class="python value">45</code></div><div class="line number3 index2 alt2"><code class="python plain">Compression </code><code class="python keyword">=</code> <code class="python plain">yes</code></div><div class="line number4 index3 alt1"><code class="python plain">CompressionLevel </code><code class="python keyword">=</code> <code class="python value">9</code></div><div class="line number5 index4 alt2"><code class="python plain">ForwardX11 </code><code class="python keyword">=</code> <code class="python plain">yes</code></div><div class="line number6 index5 alt1"><code class="python spaces">&nbsp;</code>&nbsp;</div><div class="line number7 index6 alt2"><code class="python plain">[bitbucket.org]</code></div><div class="line number8 index7 alt1"><code class="python plain">User </code><code class="python keyword">=</code> <code class="python plain">hg</code></div><div class="line number9 index8 alt2"><code class="python spaces">&nbsp;</code>&nbsp;</div><div class="line number10 index9 alt1"><code class="python plain">[topsecret.server.com]</code></div><div class="line number11 index10 alt2"><code class="python plain">Port </code><code class="python keyword">=</code> <code class="python value">50022</code></div><div class="line number12 index11 alt1"><code class="python plain">ForwardX11 </code><code class="python keyword">=</code> <code class="python plain">no</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>如果想用python生成一个这样的文档怎么做呢？</p>
<div class="cnblogs_Highlighter sh-gutter">
<div><div id="highlighter_336564" class="syntaxhighlighter  python"><div class="toolbar"><span><a href="http://www.cnblogs.com/yuanchenqi/articles/5732581.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python keyword">import</code> <code class="python plain">configparser</code></div><div class="line number2 index1 alt1"><code class="python spaces">&nbsp;</code>&nbsp;</div><div class="line number3 index2 alt2"><code class="python plain">config </code><code class="python keyword">=</code> <code class="python plain">configparser.ConfigParser()</code></div><div class="line number4 index3 alt1"><code class="python plain">config[</code><code class="python string">"DEFAULT"</code><code class="python plain">] </code><code class="python keyword">=</code> <code class="python plain">{</code><code class="python string">'ServerAliveInterval'</code><code class="python plain">: </code><code class="python string">'45'</code><code class="python plain">,</code></div><div class="line number5 index4 alt2"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python string">'Compression'</code><code class="python plain">: </code><code class="python string">'yes'</code><code class="python plain">,</code></div><div class="line number6 index5 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python string">'CompressionLevel'</code><code class="python plain">: </code><code class="python string">'9'</code><code class="python plain">}</code></div><div class="line number7 index6 alt2"><code class="python spaces">&nbsp;</code>&nbsp;</div><div class="line number8 index7 alt1"><code class="python plain">config[</code><code class="python string">'bitbucket.org'</code><code class="python plain">] </code><code class="python keyword">=</code> <code class="python plain">{}</code></div><div class="line number9 index8 alt2"><code class="python plain">config[</code><code class="python string">'bitbucket.org'</code><code class="python plain">][</code><code class="python string">'User'</code><code class="python plain">] </code><code class="python keyword">=</code> <code class="python string">'hg'</code></div><div class="line number10 index9 alt1"><code class="python plain">config[</code><code class="python string">'topsecret.server.com'</code><code class="python plain">] </code><code class="python keyword">=</code> <code class="python plain">{}</code></div><div class="line number11 index10 alt2"><code class="python plain">topsecret </code><code class="python keyword">=</code> <code class="python plain">config[</code><code class="python string">'topsecret.server.com'</code><code class="python plain">]</code></div><div class="line number12 index11 alt1"><code class="python plain">topsecret[</code><code class="python string">'Host Port'</code><code class="python plain">] </code><code class="python keyword">=</code> <code class="python string">'50022'</code>&nbsp;&nbsp;&nbsp;&nbsp; <code class="python comments"># mutates the parser</code></div><div class="line number13 index12 alt2"><code class="python plain">topsecret[</code><code class="python string">'ForwardX11'</code><code class="python plain">] </code><code class="python keyword">=</code> <code class="python string">'no'</code>&nbsp; <code class="python comments"># same here</code></div><div class="line number14 index13 alt1"><code class="python plain">config[</code><code class="python string">'DEFAULT'</code><code class="python plain">][</code><code class="python string">'ForwardX11'</code><code class="python plain">] </code><code class="python keyword">=</code> <code class="python string">'yes'</code><code class="python plain">&lt;br&gt;</code></div><div class="line number15 index14 alt2"><code class="python plain">with </code><code class="python functions">open</code><code class="python plain">(</code><code class="python string">'example.ini'</code><code class="python plain">, </code><code class="python string">'w'</code><code class="python plain">) as configfile:</code></div><div class="line number16 index15 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;</code><code class="python plain">config.write(configfile)</code></div></div></td></tr></tbody></table></div></div>
</div>
<div class="cnblogs_code" onclick="cnblogs_code_show(&#39;22ba5f9d-a8a0-4e62-9250-74aee029615a&#39;)"><img id="code_img_closed_22ba5f9d-a8a0-4e62-9250-74aee029615a" class="code_img_closed" src="./index_files/ContractedBlock.gif" alt="" style="display: none;"><img id="code_img_opened_22ba5f9d-a8a0-4e62-9250-74aee029615a" class="code_img_opened" style="" onclick="cnblogs_code_hide(&#39;22ba5f9d-a8a0-4e62-9250-74aee029615a&#39;,event)" src="./index_files/ExpandedBlockStart.gif" alt="">
<div id="cnblogs_code_open_22ba5f9d-a8a0-4e62-9250-74aee029615a" class="cnblogs_code_hide" style="display: block;"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./index_files/copycode.gif" alt="复制代码"></a></span></div>
<pre><span style="color: #0000ff;">import</span><span style="color: #000000;"> configparser

config </span>=<span style="color: #000000;"> configparser.ConfigParser()

</span><span style="color: #008000;">#</span><span style="color: #008000;">---------------------------------------------查</span>
<span style="color: #0000ff;">print</span>(config.sections())   <span style="color: #008000;">#</span><span style="color: #008000;">[]</span>
<span style="color: #000000;">
config.read(</span><span style="color: #800000;">'</span><span style="color: #800000;">example.ini</span><span style="color: #800000;">'</span><span style="color: #000000;">)

</span><span style="color: #0000ff;">print</span>(config.sections())   <span style="color: #008000;">#</span><span style="color: #008000;">['bitbucket.org', 'topsecret.server.com']</span>

<span style="color: #0000ff;">print</span>(<span style="color: #800000;">'</span><span style="color: #800000;">bytebong.com</span><span style="color: #800000;">'</span> <span style="color: #0000ff;">in</span> config)<span style="color: #008000;">#</span><span style="color: #008000;"> False</span>

<span style="color: #0000ff;">print</span>(config[<span style="color: #800000;">'</span><span style="color: #800000;">bitbucket.org</span><span style="color: #800000;">'</span>][<span style="color: #800000;">'</span><span style="color: #800000;">User</span><span style="color: #800000;">'</span>]) <span style="color: #008000;">#</span><span style="color: #008000;"> hg</span>

<span style="color: #0000ff;">print</span>(config[<span style="color: #800000;">'</span><span style="color: #800000;">DEFAULT</span><span style="color: #800000;">'</span>][<span style="color: #800000;">'</span><span style="color: #800000;">Compression</span><span style="color: #800000;">'</span>]) <span style="color: #008000;">#</span><span style="color: #008000;">yes</span>

<span style="color: #0000ff;">print</span>(config[<span style="color: #800000;">'</span><span style="color: #800000;">topsecret.server.com</span><span style="color: #800000;">'</span>][<span style="color: #800000;">'</span><span style="color: #800000;">ForwardX11</span><span style="color: #800000;">'</span>])  <span style="color: #008000;">#</span><span style="color: #008000;">no</span>


<span style="color: #0000ff;">for</span> key <span style="color: #0000ff;">in</span> config[<span style="color: #800000;">'</span><span style="color: #800000;">bitbucket.org</span><span style="color: #800000;">'</span><span style="color: #000000;">]:
    </span><span style="color: #0000ff;">print</span><span style="color: #000000;">(key)


</span><span style="color: #008000;">#</span><span style="color: #008000;"> user</span><span style="color: #008000;">
#</span><span style="color: #008000;"> serveraliveinterval</span><span style="color: #008000;">
#</span><span style="color: #008000;"> compression</span><span style="color: #008000;">
#</span><span style="color: #008000;"> compressionlevel</span><span style="color: #008000;">
#</span><span style="color: #008000;"> forwardx11</span>


<span style="color: #0000ff;">print</span>(config.options(<span style="color: #800000;">'</span><span style="color: #800000;">bitbucket.org</span><span style="color: #800000;">'</span>))<span style="color: #008000;">#</span><span style="color: #008000;">['user', 'serveraliveinterval', 'compression', 'compressionlevel', 'forwardx11']</span>
<span style="color: #0000ff;">print</span>(config.items(<span style="color: #800000;">'</span><span style="color: #800000;">bitbucket.org</span><span style="color: #800000;">'</span>))  <span style="color: #008000;">#</span><span style="color: #008000;">[('serveraliveinterval', '45'), ('compression', 'yes'), ('compressionlevel', '9'), ('forwardx11', 'yes'), ('user', 'hg')]</span>

<span style="color: #0000ff;">print</span>(config.get(<span style="color: #800000;">'</span><span style="color: #800000;">bitbucket.org</span><span style="color: #800000;">'</span>,<span style="color: #800000;">'</span><span style="color: #800000;">compression</span><span style="color: #800000;">'</span>))<span style="color: #008000;">#</span><span style="color: #008000;">yes</span>


<span style="color: #008000;">#</span><span style="color: #008000;">---------------------------------------------删,改,增(config.write(open('i.cfg', "w")))</span>
<span style="color: #000000;">

config.add_section(</span><span style="color: #800000;">'</span><span style="color: #800000;">yuan</span><span style="color: #800000;">'</span><span style="color: #000000;">)

config.remove_section(</span><span style="color: #800000;">'</span><span style="color: #800000;">topsecret.server.com</span><span style="color: #800000;">'</span><span style="color: #000000;">)
config.remove_option(</span><span style="color: #800000;">'</span><span style="color: #800000;">bitbucket.org</span><span style="color: #800000;">'</span>,<span style="color: #800000;">'</span><span style="color: #800000;">user</span><span style="color: #800000;">'</span><span style="color: #000000;">)

config.set(</span><span style="color: #800000;">'</span><span style="color: #800000;">bitbucket.org</span><span style="color: #800000;">'</span>,<span style="color: #800000;">'</span><span style="color: #800000;">k1</span><span style="color: #800000;">'</span>,<span style="color: #800000;">'</span><span style="color: #800000;">11111</span><span style="color: #800000;">'</span><span style="color: #000000;">)

config.write(open(</span><span style="color: #800000;">'</span><span style="color: #800000;">i.cfg</span><span style="color: #800000;">'</span>, <span style="color: #800000;">"</span><span style="color: #800000;">w</span><span style="color: #800000;">"</span>))</pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./index_files/copycode.gif" alt="复制代码"></a></span></div></div>
<span class="cnblogs_code_collapse" style="display: none;">增删改查</span></div>
<h3><strong>hashlib模块(<span style="color: #ff9900;">* *</span>)</strong></h3>
<p>用于加密相关的操作，3.x里代替了md5模块和sha模块，主要提供&nbsp;SHA1, SHA224, SHA256, SHA384, SHA512 ，MD5 算法</p>
<div class="cnblogs_Highlighter sh-gutter">
<div><div id="highlighter_821551" class="syntaxhighlighter  python"><div class="toolbar"><span><a href="http://www.cnblogs.com/yuanchenqi/articles/5732581.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python keyword">import</code> <code class="python plain">hashlib</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="python plain">m</code><code class="python keyword">=</code><code class="python plain">hashlib.md5()</code><code class="python comments"># m=hashlib.sha256()</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="python plain">m.update(</code><code class="python string">'hello'</code><code class="python plain">.encode(</code><code class="python string">'utf8'</code><code class="python plain">))</code></div><div class="line number6 index5 alt1"><code class="python functions">print</code><code class="python plain">(m.hexdigest())&nbsp; </code><code class="python comments">#5d41402abc4b2a76b9719d911017c592</code></div><div class="line number7 index6 alt2">&nbsp;</div><div class="line number8 index7 alt1"><code class="python plain">m.update(</code><code class="python string">'alvin'</code><code class="python plain">.encode(</code><code class="python string">'utf8'</code><code class="python plain">))</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1"><code class="python functions">print</code><code class="python plain">(m.hexdigest())&nbsp; </code><code class="python comments">#92a7e713c30abbb0319fa07da2a5c4af</code></div><div class="line number11 index10 alt2">&nbsp;</div><div class="line number12 index11 alt1"><code class="python plain">m2</code><code class="python keyword">=</code><code class="python plain">hashlib.md5()</code></div><div class="line number13 index12 alt2"><code class="python plain">m2.update(</code><code class="python string">'helloalvin'</code><code class="python plain">.encode(</code><code class="python string">'utf8'</code><code class="python plain">))</code></div><div class="line number14 index13 alt1"><code class="python functions">print</code><code class="python plain">(m2.hexdigest()) </code><code class="python comments">#92a7e713c30abbb0319fa07da2a5c4af</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>以上加密算法虽然依然非常厉害，但时候存在缺陷，即：通过撞库可以反解。所以，有必要对加密算法中添加自定义key再来做加密。</p>
<div class="cnblogs_Highlighter sh-gutter">
<div><div id="highlighter_132387" class="syntaxhighlighter  python"><div class="toolbar"><span><a href="http://www.cnblogs.com/yuanchenqi/articles/5732581.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python keyword">import</code> <code class="python plain">hashlib</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="python comments"># ######## 256 ########</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="python functions">hash</code> <code class="python keyword">=</code> <code class="python plain">hashlib.sha256(</code><code class="python string">'898oaFs09f'</code><code class="python plain">.encode(</code><code class="python string">'utf8'</code><code class="python plain">))</code></div><div class="line number6 index5 alt1"><code class="python functions">hash</code><code class="python plain">.update(</code><code class="python string">'alvin'</code><code class="python plain">.encode(</code><code class="python string">'utf8'</code><code class="python plain">))</code></div><div class="line number7 index6 alt2"><code class="python functions">print</code> <code class="python plain">(</code><code class="python functions">hash</code><code class="python plain">.hexdigest())</code><code class="python comments">#e79e68f070cdedcfe63eaf1a2e92c83b4cfb1b5c6bc452d214c1b7e77cdfd1c7</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>python 还有一个 hmac 模块，它内部对我们创建 key 和 内容 再进行处理然后再加密:</p>
<div class="cnblogs_Highlighter sh-gutter">
<div><div id="highlighter_314569" class="syntaxhighlighter  python"><div class="toolbar"><span><a href="http://www.cnblogs.com/yuanchenqi/articles/5732581.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python keyword">import</code> <code class="python plain">hmac</code></div><div class="line number2 index1 alt1"><code class="python plain">h </code><code class="python keyword">=</code> <code class="python plain">hmac.new(</code><code class="python string">'alvin'</code><code class="python plain">.encode(</code><code class="python string">'utf8'</code><code class="python plain">))</code></div><div class="line number3 index2 alt2"><code class="python plain">h.update(</code><code class="python string">'hello'</code><code class="python plain">.encode(</code><code class="python string">'utf8'</code><code class="python plain">))</code></div><div class="line number4 index3 alt1"><code class="python functions">print</code> <code class="python plain">(h.hexdigest())</code><code class="python comments">#320df9832eab4c038b6c1d7ed73a5940</code></div></div></td></tr></tbody></table></div></div>
</div>
<h3>subprocess模块(<span style="color: #ff9900;">* * * *</span>)</h3>
<p>&nbsp; &nbsp; &nbsp; 当我们需要调用系统的命令的时候，最先考虑的os模块。用os.system()和os.popen()来进行操作。但是这两个命令过于简单，不能完成一些复杂的操作，如给运行的命令提供输入或者读取命令的输出，判断该命令的运行状态，管理多个命令的并行等等。这时subprocess中的Popen命令就能有效的完成我们需要的操作。</p>
<div>&nbsp; &nbsp; &nbsp; subprocess模块允许一个进程创建一个新的子进程，通过管道连接到子进程的stdin/stdout/stderr，获取子进程的返回值等操作。&nbsp;</div>
<p><span style="color: #008000;">The subprocess&nbsp;module allows you to spawn new processes, connect to their input/output/error pipes, and obtain their return codes.</span></p>
<p><span style="color: #008000;">This module intends to replace several other, older modules and functions, such as: os.system、os.spawn*、os.popen*、popen2.*、commands.*</span></p>
<p>&nbsp;</p>
<p><span style="color: #ff0000;">这个模块一个类：Popen。</span></p>
<div class="cnblogs_Highlighter sh-gutter">
<div><div id="highlighter_425781" class="syntaxhighlighter  python"><div class="toolbar"><span><a href="http://www.cnblogs.com/yuanchenqi/articles/5732581.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python comments">#Popen它的构造函数如下：</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="python plain">subprocess.Popen(args, bufsize</code><code class="python keyword">=</code><code class="python value">0</code><code class="python plain">, executable</code><code class="python keyword">=</code><code class="python color1">None</code><code class="python plain">, stdin</code><code class="python keyword">=</code><code class="python color1">None</code><code class="python plain">, stdout</code><code class="python keyword">=</code><code class="python color1">None</code><code class="python plain">,stderr</code><code class="python keyword">=</code><code class="python color1">None</code><code class="python plain">, preexec_fn</code><code class="python keyword">=</code><code class="python color1">None</code><code class="python plain">, close_fds</code><code class="python keyword">=</code><code class="python color1">False</code><code class="python plain">, shell</code><code class="python keyword">=</code><code class="python color1">False</code><code class="python plain">,&lt;br&gt;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; cwd</code><code class="python keyword">=</code><code class="python color1">None</code><code class="python plain">, env</code><code class="python keyword">=</code><code class="python color1">None</code><code class="python plain">, universal_newlines</code><code class="python keyword">=</code><code class="python color1">False</code><code class="python plain">, startupinfo</code><code class="python keyword">=</code><code class="python color1">None</code><code class="python plain">, creationflags</code><code class="python keyword">=</code><code class="python value">0</code><code class="python plain">)</code></div></div></td></tr></tbody></table></div></div>
</div>
<div class="cnblogs_code" onclick="cnblogs_code_show(&#39;34665090-6424-4b2c-b00d-eb4d87f14a01&#39;)"><img id="code_img_closed_34665090-6424-4b2c-b00d-eb4d87f14a01" class="code_img_closed" src="./index_files/ContractedBlock.gif" alt="" style="display: none;"><img id="code_img_opened_34665090-6424-4b2c-b00d-eb4d87f14a01" class="code_img_opened" style="" onclick="cnblogs_code_hide(&#39;34665090-6424-4b2c-b00d-eb4d87f14a01&#39;,event)" src="./index_files/ExpandedBlockStart.gif" alt="">
<div id="cnblogs_code_open_34665090-6424-4b2c-b00d-eb4d87f14a01" class="cnblogs_code_hide" style="display: block;"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./index_files/copycode.gif" alt="复制代码"></a></span></div>
<pre><span style="color: #008000;">#</span><span style="color: #008000;"> 参数args可以是字符串或者序列类型（如：list，元组），用于指定进程的可执行文件及其参数。</span><span style="color: #008000;">
#</span><span style="color: #008000;"> 如果是序列类型，第一个元素通常是可执行文件的路径。我们也可以显式的使用executeable参</span><span style="color: #008000;">
#</span><span style="color: #008000;"> 数来指定可执行文件的路径。在windows操作系统上，Popen通过调用CreateProcess()来创</span><span style="color: #008000;">
#</span><span style="color: #008000;"> 建子进程,CreateProcess接收一个字符串参数，如果args是序列类型，系统将会通过</span><span style="color: #008000;">
#</span><span style="color: #008000;"> list2cmdline()函数将序列类型转换为字符串。</span><span style="color: #008000;">
#</span> <span style="color: #008000;">
#</span> <span style="color: #008000;">
#</span><span style="color: #008000;"> 参数bufsize：指定缓冲。我到现在还不清楚这个参数的具体含义，望各个大牛指点。</span><span style="color: #008000;">
#</span> <span style="color: #008000;">
#</span><span style="color: #008000;"> 参数executable用于指定可执行程序。一般情况下我们通过args参数来设置所要运行的程序。如</span><span style="color: #008000;">
#</span><span style="color: #008000;"> 果将参数shell设为True，executable将指定程序使用的shell。在windows平台下，默认的</span><span style="color: #008000;">
#</span><span style="color: #008000;"> shell由COMSPEC环境变量来指定。</span><span style="color: #008000;">
#</span> <span style="color: #008000;">
#</span><span style="color: #008000;"> 参数stdin, stdout, stderr分别表示程序的标准输入、输出、错误句柄。他们可以是PIPE，</span><span style="color: #008000;">
#</span><span style="color: #008000;"> 文件描述符或文件对象，也可以设置为None，表示从父进程继承。</span><span style="color: #008000;">
#</span> <span style="color: #008000;">
#</span><span style="color: #008000;"> 参数preexec_fn只在Unix平台下有效，用于指定一个可执行对象（callable object），它将</span><span style="color: #008000;">
#</span><span style="color: #008000;"> 在子进程运行之前被调用。</span><span style="color: #008000;">
#</span> <span style="color: #008000;">
#</span><span style="color: #008000;"> 参数Close_sfs：在windows平台下，如果close_fds被设置为True，则新创建的子进程将不会</span><span style="color: #008000;">
#</span><span style="color: #008000;"> 继承父进程的输入、输出、错误管道。我们不能将close_fds设置为True同时重定向子进程的标准</span><span style="color: #008000;">
#</span><span style="color: #008000;"> 输入、输出与错误(stdin, stdout, stderr)。</span><span style="color: #008000;">
#</span> <span style="color: #008000;">
#</span><span style="color: #008000;"> 如果参数shell设为true，程序将通过shell来执行。</span><span style="color: #008000;">
#</span> <span style="color: #008000;">
#</span><span style="color: #008000;"> 参数cwd用于设置子进程的当前目录。</span><span style="color: #008000;">
#</span> <span style="color: #008000;">
#</span><span style="color: #008000;"> 参数env是字典类型，用于指定子进程的环境变量。如果env = None，子进程的环境变量将从父</span><span style="color: #008000;">
#</span><span style="color: #008000;"> 进程中继承。</span><span style="color: #008000;">
#</span> <span style="color: #008000;">
#</span><span style="color: #008000;"> 参数Universal_newlines:不同操作系统下，文本的换行符是不一样的。如：windows下</span><span style="color: #008000;">
#</span><span style="color: #008000;"> 用’/r/n’表示换，而Linux下用’/n’。如果将此参数设置为True，Python统一把这些换行符当</span><span style="color: #008000;">
#</span><span style="color: #008000;"> 作’/n’来处理。</span><span style="color: #008000;">
#</span> <span style="color: #008000;">
#</span><span style="color: #008000;"> 参数startupinfo与createionflags只在windows下用效，它们将被传递给底层的</span><span style="color: #008000;">
#</span><span style="color: #008000;"> CreateProcess()函数，用于设置子进程的一些属性，如：主窗口的外观，进程的优先级等等。</span></pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./index_files/copycode.gif" alt="复制代码"></a></span></div></div>
<span class="cnblogs_code_collapse" style="display: none;">parameter</span></div>
<h4>简单命令：</h4>
<div class="cnblogs_Highlighter sh-gutter">
<div><div id="highlighter_561439" class="syntaxhighlighter  python"><div class="toolbar"><span><a href="http://www.cnblogs.com/yuanchenqi/articles/5732581.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python keyword">import</code> <code class="python plain">subprocess</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="python plain">a</code><code class="python keyword">=</code><code class="python plain">subprocess.Popen(</code><code class="python string">'ls'</code><code class="python plain">)</code><code class="python comments">#&nbsp; 创建一个新的进程,与主进程不同步</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="python functions">print</code><code class="python plain">(</code><code class="python string">'&gt;&gt;&gt;&gt;&gt;&gt;&gt;'</code><code class="python plain">,a)</code><code class="python comments">#a是Popen的一个实例对象</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="python comments">'''</code></div><div class="line number8 index7 alt1"><code class="python comments">&gt;&gt;&gt;&gt;&gt;&gt;&gt; &lt;subprocess.Popen object at 0x10185f860&gt;</code></div><div class="line number9 index8 alt2"><code class="python comments">__init__.py</code></div><div class="line number10 index9 alt1"><code class="python comments">__pycache__</code></div><div class="line number11 index10 alt2"><code class="python comments">log.py</code></div><div class="line number12 index11 alt1"><code class="python comments">main.py</code></div><div class="line number13 index12 alt2">&nbsp;</div><div class="line number14 index13 alt1"><code class="python comments">'''</code></div><div class="line number15 index14 alt2">&nbsp;</div><div class="line number16 index15 alt1"><code class="python comments"># subprocess.Popen('ls -l',shell=True)</code></div><div class="line number17 index16 alt2">&nbsp;</div><div class="line number18 index17 alt1"><code class="python comments"># subprocess.Popen(['ls','-l'])</code></div></div></td></tr></tbody></table></div></div>
</div>
<h4>subprocess.PIPE</h4>
<p>在创建Popen对象时，subprocess.PIPE可以初始化stdin, stdout或stderr参数。表示与子进程通信的标准流。</p>
<div class="cnblogs_Highlighter sh-gutter">
<div><div id="highlighter_549930" class="syntaxhighlighter  python"><div class="toolbar"><span><a href="http://www.cnblogs.com/yuanchenqi/articles/5732581.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python keyword">import</code> <code class="python plain">subprocess</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="python comments"># subprocess.Popen('ls')</code></div><div class="line number4 index3 alt1"><code class="python plain">p</code><code class="python keyword">=</code><code class="python plain">subprocess.Popen(</code><code class="python string">'ls'</code><code class="python plain">,stdout</code><code class="python keyword">=</code><code class="python plain">subprocess.PIPE)</code><code class="python comments">#结果跑哪去啦?</code></div><div class="line number5 index4 alt2">&nbsp;</div><div class="line number6 index5 alt1"><code class="python functions">print</code><code class="python plain">(p.stdout.read())</code><code class="python comments">#这这呢:b'__pycache__\nhello.py\nok.py\nweb\n'</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>这是因为subprocess创建了子进程，结果本在子进程中，if 想要执行结果转到主进程中，就得需要一个管道，即 ：&nbsp;stdout=subprocess.PIPE</p>
<h4>subprocess.STDOUT</h4>
<p>创建Popen对象时，用于初始化stderr参数，表示将错误通过标准输出流输出。</p>
<h4>Popen的方法</h4>
<div class="cnblogs_code" onclick="cnblogs_code_show(&#39;917ba286-85d2-4096-8ba1-86b94cd6a72d&#39;)"><img id="code_img_closed_917ba286-85d2-4096-8ba1-86b94cd6a72d" class="code_img_closed" src="./index_files/ContractedBlock.gif" alt="" style="display: none;"><img id="code_img_opened_917ba286-85d2-4096-8ba1-86b94cd6a72d" class="code_img_opened" style="" onclick="cnblogs_code_hide(&#39;917ba286-85d2-4096-8ba1-86b94cd6a72d&#39;,event)" src="./index_files/ExpandedBlockStart.gif" alt="">
<div id="cnblogs_code_open_917ba286-85d2-4096-8ba1-86b94cd6a72d" class="cnblogs_code_hide" style="display: block;"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./index_files/copycode.gif" alt="复制代码"></a></span></div>
<pre><span style="color: #000000;">Popen.poll() 
用于检查子进程是否已经结束。设置并返回returncode属性。

Popen.wait() 
等待子进程结束。设置并返回returncode属性。

Popen.communicate(input</span>=<span style="color: #000000;">None)
与子进程进行交互。向stdin发送数据，或从stdout和stderr中读取数据。可选参数input指定发送到子进程的参数。 Communicate()返回一个元组：(stdoutdata, stderrdata)。注意：如果希望通过进程的stdin向其发送数据，在创建Popen对象的时候，参数stdin必须被设置为PIPE。同样，如 果希望从stdout和stderr获取数据，必须将stdout和stderr设置为PIPE。

Popen.send_signal(signal) 
向子进程发送信号。

Popen.terminate()
停止(stop)子进程。在windows平台下，该方法将调用Windows API TerminateProcess（）来结束子进程。

Popen.kill()
杀死子进程。

Popen.stdin 
如果在创建Popen对象是，参数stdin被设置为PIPE，Popen.stdin将返回一个文件对象用于策子进程发送指令。否则返回None。

Popen.stdout 
如果在创建Popen对象是，参数stdout被设置为PIPE，Popen.stdout将返回一个文件对象用于策子进程发送指令。否则返回 None。

Popen.stderr 
如果在创建Popen对象是，参数stdout被设置为PIPE，Popen.stdout将返回一个文件对象用于策子进程发送指令。否则返回 None。

Popen.pid 
获取子进程的进程ID。

Popen.returncode 
获取进程的返回值。如果进程还没有结束，返回None。</span></pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./index_files/copycode.gif" alt="复制代码"></a></span></div></div>
<span class="cnblogs_code_collapse" style="display: none;">View Code</span></div>
<h4>supprocess模块的工具函数</h4>
<div class="cnblogs_Highlighter sh-gutter">
<div><div id="highlighter_980609" class="syntaxhighlighter  python"><div class="toolbar"><span><a href="http://www.cnblogs.com/yuanchenqi/articles/5732581.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python plain">supprocess模块提供了一些函数，方便我们用于创建进程来实现一些简单的功能。</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="python plain">subprocess.call(</code><code class="python keyword">*</code><code class="python plain">popenargs, </code><code class="python keyword">*</code><code class="python keyword">*</code><code class="python plain">kwargs)</code></div><div class="line number4 index3 alt1"><code class="python plain">运行命令。该函数将一直等待到子进程运行结束，并返回进程的returncode。如果子进程不需要进行交 互,就可以使用该函数来创建。</code></div><div class="line number5 index4 alt2">&nbsp;</div><div class="line number6 index5 alt1"><code class="python plain">subprocess.check_call(</code><code class="python keyword">*</code><code class="python plain">popenargs, </code><code class="python keyword">*</code><code class="python keyword">*</code><code class="python plain">kwargs) </code></div><div class="line number7 index6 alt2"><code class="python plain">与subprocess.call(</code><code class="python keyword">*</code><code class="python plain">popenargs, </code><code class="python keyword">*</code><code class="python keyword">*</code><code class="python plain">kwargs)功能一样，只是如果子进程返回的returncode不为</code><code class="python value">0</code><code class="python plain">的话，将触发CalledProcessError异常。在异常对象中，包 括进程的returncode信息。</code></div><div class="line number8 index7 alt1">&nbsp;</div><div class="line number9 index8 alt2"><code class="python plain">check_output(</code><code class="python keyword">*</code><code class="python plain">popenargs, </code><code class="python keyword">*</code><code class="python keyword">*</code><code class="python plain">kwargs)</code></div><div class="line number10 index9 alt1"><code class="python plain">与call()方法类似，以byte string的方式返回子进程的输出，如果子进程的返回值不是</code><code class="python value">0</code><code class="python plain">，它抛出CalledProcessError异常，这个异常中的returncode包含返回码，output属性包含已有的输出。</code></div><div class="line number11 index10 alt2">&nbsp;</div><div class="line number12 index11 alt1"><code class="python plain">getstatusoutput(cmd)</code><code class="python keyword">/</code><code class="python plain">getoutput(cmd)</code></div><div class="line number13 index12 alt2"><code class="python plain">这两个函数仅仅在Unix下可用，它们在shell中执行指定的命令cmd，前者返回(status, output)，后者返回output。其中，这里的output包括子进程的stdout和stderr。</code></div></div></td></tr></tbody></table></div></div>
</div>
<div class="cnblogs_code" onclick="cnblogs_code_show(&#39;f5ef82d5-12f1-4298-9c19-af469ac0f3d9&#39;)"><img id="code_img_closed_f5ef82d5-12f1-4298-9c19-af469ac0f3d9" class="code_img_closed" src="./index_files/ContractedBlock.gif" alt="" style="display: none;"><img id="code_img_opened_f5ef82d5-12f1-4298-9c19-af469ac0f3d9" class="code_img_opened" style="" onclick="cnblogs_code_hide(&#39;f5ef82d5-12f1-4298-9c19-af469ac0f3d9&#39;,event)" src="./index_files/ExpandedBlockStart.gif" alt="">
<div id="cnblogs_code_open_f5ef82d5-12f1-4298-9c19-af469ac0f3d9" class="cnblogs_code_hide" style="display: block;"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./index_files/copycode.gif" alt="复制代码"></a></span></div>
<pre><span style="color: #0000ff;">import</span><span style="color: #000000;"> subprocess

</span><span style="color: #008000;">#</span><span style="color: #008000;">1</span><span style="color: #008000;">
#</span><span style="color: #008000;"> subprocess.call('ls',shell=True)</span>
<span style="color: #800000;">'''</span><span style="color: #800000;">
hello.py
ok.py
web
</span><span style="color: #800000;">'''</span>
<span style="color: #008000;">#</span><span style="color: #008000;"> data=subprocess.call('ls',shell=True)</span><span style="color: #008000;">
#</span><span style="color: #008000;"> print(data)</span>
<span style="color: #800000;">'''</span><span style="color: #800000;">
hello.py
ok.py
web
0
</span><span style="color: #800000;">'''</span>

<span style="color: #008000;">#</span><span style="color: #008000;">2</span><span style="color: #008000;">
#</span><span style="color: #008000;"> subprocess.check_call('ls',shell=True)</span>

<span style="color: #800000;">'''</span><span style="color: #800000;">
hello.py
ok.py
web
</span><span style="color: #800000;">'''</span>
<span style="color: #008000;">#</span><span style="color: #008000;"> data=subprocess.check_call('ls',shell=True)</span><span style="color: #008000;">
#</span><span style="color: #008000;"> print(data)</span>
<span style="color: #800000;">'''</span><span style="color: #800000;">
hello.py
ok.py
web
0
</span><span style="color: #800000;">'''</span>
<span style="color: #008000;">#</span><span style="color: #008000;"> 两个函数区别:只是如果子进程返回的returncode不为0的话，将触发CalledProcessError异常</span>



<span style="color: #008000;">#</span><span style="color: #008000;">3</span><span style="color: #008000;">
#</span><span style="color: #008000;"> subprocess.check_output('ls')#无结果</span>

<span style="color: #008000;">#</span><span style="color: #008000;"> data=subprocess.check_output('ls')</span><span style="color: #008000;">
#</span><span style="color: #008000;"> print(data)  #b'hello.py\nok.py\nweb\n'</span></pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./index_files/copycode.gif" alt="复制代码"></a></span></div></div>
<span class="cnblogs_code_collapse" style="display: none;">演示</span></div>
<h4>&nbsp;交互命令：</h4>
<p>终端输入的命令分为两种：</p>
<ul>
<li>输入即可得到输出，如：ifconfig</li>
<li>输入进行某环境，依赖再输入，如：python</li>
</ul>
<p>需要交互的命令示例</p>
<p>待续</p>
<h3><span style="font-size: 1.17em;">logging模块(</span><span style="color: #ff9900;">* * * * *</span><span style="font-size: 1.17em;">)</span></h3>
<p>一 (简单应用)</p>
<div class="cnblogs_code">
<pre><span style="color: #0000ff;">import</span><span style="color: #000000;"> logging  
logging.debug(</span><span style="color: #800000;">'</span><span style="color: #800000;">debug message</span><span style="color: #800000;">'</span><span style="color: #000000;">)  
logging.info(</span><span style="color: #800000;">'</span><span style="color: #800000;">info message</span><span style="color: #800000;">'</span><span style="color: #000000;">)  
logging.warning(</span><span style="color: #800000;">'</span><span style="color: #800000;">warning message</span><span style="color: #800000;">'</span><span style="color: #000000;">)  
logging.error(</span><span style="color: #800000;">'</span><span style="color: #800000;">error message</span><span style="color: #800000;">'</span><span style="color: #000000;">)  
logging.critical(</span><span style="color: #800000;">'</span><span style="color: #800000;">critical message</span><span style="color: #800000;">'</span>)  </pre>
</div>
<p>输出：</p>
<p>WARNING:root:warning message<br>ERROR:root:error message<br>CRITICAL:root:critical message</p>
<p>可见，默认情况下<a class="replace_word" title="undefined" href="http://lib.csdn.net/base/11" target="_blank">Python</a>的logging模块将日志打印到了标准输出中，且只显示了大于等于WARNING级别的日志，这说明默认的日志级别设置为WARNING（日志级别等级CRITICAL &gt; ERROR &gt; WARNING &gt;&nbsp;INFO &gt; DEBUG &gt; NOTSET），默认的日志格式为日志级别：Logger名称：用户输出消息。</p>
<p>&nbsp;</p>
<p>二 &nbsp;<strong>灵活配置日志级别，日志格式，输出位置</strong></p>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./index_files/copycode.gif" alt="复制代码"></a></span></div>
<pre><span style="color: #0000ff;">import</span><span style="color: #000000;"> logging  
logging.basicConfig(level</span>=<span style="color: #000000;">logging.DEBUG,  
                    format</span>=<span style="color: #800000;">'</span><span style="color: #800000;">%(asctime)s %(filename)s[line:%(lineno)d] %(levelname)s %(message)s</span><span style="color: #800000;">'</span><span style="color: #000000;">,  
                    datefmt</span>=<span style="color: #800000;">'</span><span style="color: #800000;">%a, %d %b %Y %H:%M:%S</span><span style="color: #800000;">'</span><span style="color: #000000;">,  
                    filename</span>=<span style="color: #800000;">'</span><span style="color: #800000;">/tmp/test.log</span><span style="color: #800000;">'</span><span style="color: #000000;">,  
                    filemode</span>=<span style="color: #800000;">'</span><span style="color: #800000;">w</span><span style="color: #800000;">'</span><span style="color: #000000;">)  
  
logging.debug(</span><span style="color: #800000;">'</span><span style="color: #800000;">debug message</span><span style="color: #800000;">'</span><span style="color: #000000;">)  
logging.info(</span><span style="color: #800000;">'</span><span style="color: #800000;">info message</span><span style="color: #800000;">'</span><span style="color: #000000;">)  
logging.warning(</span><span style="color: #800000;">'</span><span style="color: #800000;">warning message</span><span style="color: #800000;">'</span><span style="color: #000000;">)  
logging.error(</span><span style="color: #800000;">'</span><span style="color: #800000;">error message</span><span style="color: #800000;">'</span><span style="color: #000000;">)  
logging.critical(</span><span style="color: #800000;">'</span><span style="color: #800000;">critical message</span><span style="color: #800000;">'</span>)</pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./index_files/copycode.gif" alt="复制代码"></a></span></div></div>
<p style="margin-left: 30px;">查看输出：<br>cat /tmp/test.log&nbsp;<br>Mon, 05 May 2014 16:29:53 test_logging.py[line:9] DEBUG debug message<br>Mon, 05 May 2014 16:29:53 test_logging.py[line:10] INFO info message<br>Mon, 05 May 2014 16:29:53 test_logging.py[line:11] WARNING warning message<br>Mon, 05 May 2014 16:29:53 test_logging.py[line:12] ERROR error message<br>Mon, 05 May 2014 16:29:53 test_logging.py[line:13] CRITICAL critical message<br><br>可见在logging.basicConfig()函数中可通过具体参数来更改logging模块默认行为，可用参数有<br>filename：用指定的文件名创建FiledHandler（后边会具体讲解handler的概念），这样日志会被存储在指定的文件中。<br>filemode：文件打开方式，在指定了filename时使用这个参数，默认值为“a”还可指定为“w”。<br>format：指定handler使用的日志显示格式。 <br>datefmt：指定日期时间格式。 <br>level：设置rootlogger（后边会讲解具体概念）的日志级别 <br>stream：用指定的stream创建StreamHandler。可以指定输出到sys.stderr,sys.stdout或者文件(f=open('test.log','w'))，默认为sys.stderr。若同时列出了filename和stream两个参数，则stream参数会被忽略。<br><br>format参数中可能用到的格式化串：<br>%(name)s Logger的名字<br>%(levelno)s 数字形式的日志级别<br>%(levelname)s 文本形式的日志级别<br>%(pathname)s 调用日志输出函数的模块的完整路径名，可能没有<br>%(filename)s 调用日志输出函数的模块的文件名<br>%(module)s 调用日志输出函数的模块名<br>%(funcName)s 调用日志输出函数的函数名<br>%(lineno)d 调用日志输出函数的语句所在的代码行<br>%(created)f 当前时间，用UNIX标准的表示时间的浮 点数表示<br>%(relativeCreated)d 输出日志信息时的，自Logger创建以 来的毫秒数<br>%(asctime)s 字符串形式的当前时间。默认格式是 “2003-07-08 16:49:45,896”。逗号后面的是毫秒<br>%(thread)d 线程ID。可能没有<br>%(threadName)s 线程名。可能没有<br>%(process)d 进程ID。可能没有<br>%(message)s用户输出的消息</p>
<p>&nbsp;</p>
<p>三 &nbsp;logger对象</p>
<p>&nbsp; &nbsp;&nbsp;上述几个例子中我们了解到了logging.debug()、logging.info()、logging.warning()、logging.error()、logging.critical()（分别用以记录不同级别的日志信息），logging.basicConfig()（用默认日志格式（Formatter）为日志系统建立一个默认的流处理器（StreamHandler），设置基础配置（如日志级别等）并加到root logger（根Logger）中）这几个logging模块级别的函数，另外还有一个模块级别的函数是logging.getLogger([name])（返回一个logger对象，如果没有指定名字将返回root logger）</p>
<p>&nbsp; &nbsp; &nbsp;先看一个最简单的过程：</p>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./index_files/copycode.gif" alt="复制代码"></a></span></div>
<pre><span style="color: #0000ff;">import</span><span style="color: #000000;"> logging

logger </span>=<span style="color: #000000;"> logging.getLogger()
</span><span style="color: #008000;">#</span><span style="color: #008000;"> 创建一个handler，用于写入日志文件</span>
fh = logging.FileHandler(<span style="color: #800000;">'</span><span style="color: #800000;">test.log</span><span style="color: #800000;">'</span><span style="color: #000000;">)

</span><span style="color: #008000;">#</span><span style="color: #008000;"> 再创建一个handler，用于输出到控制台</span>
ch =<span style="color: #000000;"> logging.StreamHandler()

formatter </span>= logging.Formatter(<span style="color: #800000;">'</span><span style="color: #800000;">%(asctime)s - %(name)s - %(levelname)s - %(message)s</span><span style="color: #800000;">'</span><span style="color: #000000;">)

fh.setFormatter(formatter)
ch.setFormatter(formatter)

logger.addHandler(fh) #logger对象可以添加多个fh和ch对象
logger.addHandler(ch)

logger.debug(</span><span style="color: #800000;">'</span><span style="color: #800000;">logger debug message</span><span style="color: #800000;">'</span><span style="color: #000000;">)
logger.info(</span><span style="color: #800000;">'</span><span style="color: #800000;">logger info message</span><span style="color: #800000;">'</span><span style="color: #000000;">)
logger.warning(</span><span style="color: #800000;">'</span><span style="color: #800000;">logger warning message</span><span style="color: #800000;">'</span><span style="color: #000000;">)
logger.error(</span><span style="color: #800000;">'</span><span style="color: #800000;">logger error message</span><span style="color: #800000;">'</span><span style="color: #000000;">)
logger.critical(</span><span style="color: #800000;">'</span><span style="color: #800000;">logger critical message</span><span style="color: #800000;">'</span>)</pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./index_files/copycode.gif" alt="复制代码"></a></span></div></div>
<p>&nbsp; &nbsp; &nbsp; 先简单介绍一下，logging库提供了多个组件：Logger、Handler、Filter、Formatter。Logger对象提供应用程序可直接使用的接口，Handler发送日志到适当的目的地，Filter提供了过滤日志信息的方法，Formatter指定日志显示格式。</p>
<p>&nbsp; &nbsp; &nbsp;(1)</p>
<p>&nbsp; &nbsp; &nbsp; Logger是一个树形层级结构，输出信息之前都要获得一个Logger（如果没有显示的获取则自动创建并使用root Logger，如第一个例子所示）。<br>&nbsp; &nbsp; &nbsp; logger = logging.getLogger()返回一个默认的Logger也即root Logger，并应用默认的日志级别、Handler和Formatter设置。<br>当然也可以通过Logger.setLevel(lel)指定最低的日志级别，可用的日志级别有logging.DEBUG、logging.INFO、logging.WARNING、logging.ERROR、logging.CRITICAL。<br>&nbsp; &nbsp; &nbsp; Logger.debug()、Logger.info()、Logger.warning()、Logger.error()、Logger.critical()输出不同级别的日志，只有日志等级大于或等于设置的日志级别的日志才会被输出。&nbsp;</p>
<div class="cnblogs_code">
<pre>logger.debug(<span style="color: #800000;">'</span><span style="color: #800000;">logger debug message</span><span style="color: #800000;">'</span><span style="color: #000000;">)  
logger.info(</span><span style="color: #800000;">'</span><span style="color: #800000;">logger info message</span><span style="color: #800000;">'</span><span style="color: #000000;">)  
logger.warning(</span><span style="color: #800000;">'</span><span style="color: #800000;">logger warning message</span><span style="color: #800000;">'</span><span style="color: #000000;">)  
logger.error(</span><span style="color: #800000;">'</span><span style="color: #800000;">logger error message</span><span style="color: #800000;">'</span><span style="color: #000000;">)  
logger.critical(</span><span style="color: #800000;">'</span><span style="color: #800000;">logger critical message</span><span style="color: #800000;">'</span>)  </pre>
</div>
<p>只输出了<br>2014-05-06 12:54:43,222 - root - WARNING - logger warning message<br>2014-05-06 12:54:43,223 - root - ERROR - logger error message<br>2014-05-06 12:54:43,224 - root - CRITICAL - logger critical message<br>&nbsp; &nbsp; &nbsp;从这个输出可以看出logger = logging.getLogger()返回的Logger名为root。这里没有用<span style="color: #ff0000;">logger.setLevel(logging.Debug</span><span style="color: #ff0000;">)</span>显示的为logger设置日志级别，所以使用默认的日志级别WARNIING，故结果只输出了大于等于WARNIING级别的信息。</p>
<p>&nbsp; &nbsp; &nbsp;(2) 如果我们再创建两个logger对象：&nbsp;</p>
<div class="cnblogs_code"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./index_files/copycode.gif" alt="复制代码"></a></span></div>
<pre><span style="color: #008000;">#</span><span style="color: #008000;">#################################################</span>
logger1 = logging.getLogger(<span style="color: #800000;">'</span><span style="color: #800000;">mylogger</span><span style="color: #800000;">'</span><span style="color: #000000;">)
logger1.setLevel(logging.DEBUG)

logger2 </span>= logging.getLogger(<span style="color: #800000;">'</span><span style="color: #800000;">mylogger</span><span style="color: #800000;">'</span><span style="color: #000000;">)
logger2.setLevel(logging.INFO)

logger1.addHandler(fh)
logger1.addHandler(ch)

logger2.addHandler(fh)
logger2.addHandler(ch)

logger1.debug(</span><span style="color: #800000;">'</span><span style="color: #800000;">logger1 debug message</span><span style="color: #800000;">'</span><span style="color: #000000;">)
logger1.info(</span><span style="color: #800000;">'</span><span style="color: #800000;">logger1 info message</span><span style="color: #800000;">'</span><span style="color: #000000;">)
logger1.warning(</span><span style="color: #800000;">'</span><span style="color: #800000;">logger1 warning message</span><span style="color: #800000;">'</span><span style="color: #000000;">)
logger1.error(</span><span style="color: #800000;">'</span><span style="color: #800000;">logger1 error message</span><span style="color: #800000;">'</span><span style="color: #000000;">)
logger1.critical(</span><span style="color: #800000;">'</span><span style="color: #800000;">logger1 critical message</span><span style="color: #800000;">'</span><span style="color: #000000;">)
  
logger2.debug(</span><span style="color: #800000;">'</span><span style="color: #800000;">logger2 debug message</span><span style="color: #800000;">'</span><span style="color: #000000;">)
logger2.info(</span><span style="color: #800000;">'</span><span style="color: #800000;">logger2 info message</span><span style="color: #800000;">'</span><span style="color: #000000;">)
logger2.warning(</span><span style="color: #800000;">'</span><span style="color: #800000;">logger2 warning message</span><span style="color: #800000;">'</span><span style="color: #000000;">)
logger2.error(</span><span style="color: #800000;">'</span><span style="color: #800000;">logger2 error message</span><span style="color: #800000;">'</span><span style="color: #000000;">)
logger2.critical(</span><span style="color: #800000;">'</span><span style="color: #800000;">logger2 critical message</span><span style="color: #800000;">'</span>)</pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./index_files/copycode.gif" alt="复制代码"></a></span></div></div>
<p>结果：</p>
<p>&nbsp; &nbsp; &nbsp;&nbsp;<img src="./index_files/877318-20160803130723622-772276541.png" alt="" width="589" height="332"></p>
<p>这里有两个个问题：</p>
<p>&nbsp; &nbsp; &nbsp; &lt;1&gt;我们明明通过logger1.setLevel(logging.DEBUG)将logger1的日志级别设置为了DEBUG，为何显示的时候没有显示出DEBUG级别的日志信息，而是从INFO级别的日志开始显示呢？</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp;原来logger1和logger2对应的是同一个Logger实例，只要logging.getLogger（name）中名称参数name相同则返回的Logger实例就是同一个，且仅有一个，也即name与Logger实例一一对应。在logger2实例中通过logger2.setLevel(logging.INFO)设置mylogger的日志级别为logging.INFO，所以最后logger1的输出遵从了后来设置的日志级别。</p>
<p>&nbsp; &nbsp; &nbsp; &lt;2&gt;为什么logger1、logger2对应的每个输出分别显示两次?<br>&nbsp; &nbsp; &nbsp; &nbsp;这是因为我们通过logger = logging.getLogger()显示的创建了root Logger，而logger1 = logging.getLogger('mylogger')创建了root Logger的孩子(root.)mylogger,logger2同样。而孩子,孙子，重孙……既会将消息分发给他的handler进行处理也会传递给所有的祖先Logger处理。</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; ok,那么现在我们把</p>
<p style="margin-left: 60px;"># logger.addHandler(fh)</p>
<p style="margin-left: 60px;"># logger.addHandler(ch) &nbsp;注释掉，我们再来看效果：</p>
<p style="margin-left: 60px;"><em>&nbsp;<img src="./index_files/877318-20160803131623028-674109084.png" alt="" width="488" height="166"></em></p>
<p style="margin-left: 60px;"><em>因为我们注释了logger对象显示的位置，所以才用了默认方式，即标准输出方式。</em>因为它的父级没有设置文件显示方式，所以在这里只打印了一次。</p>
<p style="margin-left: 60px;">孩子,孙子，重孙……可逐层继承来自祖先的日志级别、Handler、Filter设置，也可以通过Logger.setLevel(lel)、Logger.addHandler(hdlr)、Logger.removeHandler(hdlr)、Logger.addFilter(filt)、Logger.removeFilter(filt)。设置自己特别的日志级别、Handler、Filter。若不设置则使用继承来的值。</p>
<p style="margin-left: 30px;">&lt;3&gt;<strong>Filter</strong><br>&nbsp; &nbsp; &nbsp;限制只有满足过滤规则的日志才会输出。<br>&nbsp; &nbsp; &nbsp;比如我们定义了filter = logging.Filter('a.b.c'),并将这个Filter添加到了一个Handler上，则使用该Handler的Logger中只有名字带 &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;a.b.c前缀的Logger才能输出其日志。</p>
<p style="margin-left: 30px;">&nbsp;</p>
<p style="margin-left: 30px;">&nbsp; &nbsp; &nbsp;filter = logging.Filter('mylogger')&nbsp;</p>
<p style="margin-left: 30px;">&nbsp; &nbsp; &nbsp;logger.addFilter(filter)</p>
<p style="margin-left: 30px;">&nbsp; &nbsp; &nbsp;这是只对logger这个对象进行筛选</p>
<p style="margin-left: 30px;">&nbsp; &nbsp; &nbsp;如果想对所有的对象进行筛选，则：</p>
<p style="margin-left: 30px;">&nbsp; &nbsp; &nbsp;&nbsp;filter = logging.Filter('mylogger')&nbsp;</p>
<p style="margin-left: 30px;">&nbsp; &nbsp; &nbsp; fh.addFilter(filter)</p>
<p style="margin-left: 30px;">&nbsp; &nbsp; &nbsp; ch.addFilter(filter)</p>
<p style="margin-left: 30px;"><em>&nbsp; &nbsp; &nbsp; 这样，所有添加fh或者ch的logger对象都会进行筛选。</em></p>
<p style="margin-left: 30px;"><em>完整代码1：</em></p>
<div class="cnblogs_code" onclick="cnblogs_code_show(&#39;1f3552f3-01ea-480d-8c37-e0348929ffc7&#39;)"><img id="code_img_closed_1f3552f3-01ea-480d-8c37-e0348929ffc7" class="code_img_closed" src="./index_files/ContractedBlock.gif" alt="" style="display: none;"><img id="code_img_opened_1f3552f3-01ea-480d-8c37-e0348929ffc7" class="code_img_opened" style="" onclick="cnblogs_code_hide(&#39;1f3552f3-01ea-480d-8c37-e0348929ffc7&#39;,event)" src="./index_files/ExpandedBlockStart.gif" alt="">
<div id="cnblogs_code_open_1f3552f3-01ea-480d-8c37-e0348929ffc7" class="cnblogs_code_hide" style="display: block;"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./index_files/copycode.gif" alt="复制代码"></a></span></div>
<pre><span style="color: #0000ff;">import</span><span style="color: #000000;"> logging

logger </span>=<span style="color: #000000;"> logging.getLogger()
</span><span style="color: #008000;">#</span><span style="color: #008000;"> 创建一个handler，用于写入日志文件</span>
fh = logging.FileHandler(<span style="color: #800000;">'</span><span style="color: #800000;">test.log</span><span style="color: #800000;">'</span><span style="color: #000000;">)

</span><span style="color: #008000;">#</span><span style="color: #008000;"> 再创建一个handler，用于输出到控制台</span>
ch =<span style="color: #000000;"> logging.StreamHandler()

formatter </span>= logging.Formatter(<span style="color: #800000;">'</span><span style="color: #800000;">%(asctime)s - %(name)s - %(levelname)s - %(message)s</span><span style="color: #800000;">'</span><span style="color: #000000;">)

fh.setFormatter(formatter)
ch.setFormatter(formatter)

</span><span style="color: #008000;">#</span><span style="color: #008000;"> 定义一个filter</span>
filter = logging.Filter(<span style="color: #800000;">'</span><span style="color: #800000;">mylogger</span><span style="color: #800000;">'</span><span style="color: #000000;">)
fh.addFilter(filter)
ch.addFilter(filter)

</span><span style="color: #008000;">#</span><span style="color: #008000;"> logger.addFilter(filter)</span>
<span style="color: #000000;">logger.addHandler(fh)
logger.addHandler(ch)




logger.setLevel(logging.DEBUG)

logger.debug(</span><span style="color: #800000;">'</span><span style="color: #800000;">logger debug message</span><span style="color: #800000;">'</span><span style="color: #000000;">)
logger.info(</span><span style="color: #800000;">'</span><span style="color: #800000;">logger info message</span><span style="color: #800000;">'</span><span style="color: #000000;">)
logger.warning(</span><span style="color: #800000;">'</span><span style="color: #800000;">logger warning message</span><span style="color: #800000;">'</span><span style="color: #000000;">)
logger.error(</span><span style="color: #800000;">'</span><span style="color: #800000;">logger error message</span><span style="color: #800000;">'</span><span style="color: #000000;">)
logger.critical(</span><span style="color: #800000;">'</span><span style="color: #800000;">logger critical message</span><span style="color: #800000;">'</span><span style="color: #000000;">)

</span><span style="color: #008000;">#</span><span style="color: #008000;">#################################################</span>
logger1 = logging.getLogger(<span style="color: #800000;">'</span><span style="color: #800000;">mylogger</span><span style="color: #800000;">'</span><span style="color: #000000;">)
logger1.setLevel(logging.DEBUG)

logger2 </span>= logging.getLogger(<span style="color: #800000;">'</span><span style="color: #800000;">mylogger</span><span style="color: #800000;">'</span><span style="color: #000000;">)
logger2.setLevel(logging.INFO)

logger1.addHandler(fh)
logger1.addHandler(ch)

logger2.addHandler(fh)
logger2.addHandler(ch)

logger1.debug(</span><span style="color: #800000;">'</span><span style="color: #800000;">logger1 debug message</span><span style="color: #800000;">'</span><span style="color: #000000;">)
logger1.info(</span><span style="color: #800000;">'</span><span style="color: #800000;">logger1 info message</span><span style="color: #800000;">'</span><span style="color: #000000;">)
logger1.warning(</span><span style="color: #800000;">'</span><span style="color: #800000;">logger1 warning message</span><span style="color: #800000;">'</span><span style="color: #000000;">)
logger1.error(</span><span style="color: #800000;">'</span><span style="color: #800000;">logger1 error message</span><span style="color: #800000;">'</span><span style="color: #000000;">)
logger1.critical(</span><span style="color: #800000;">'</span><span style="color: #800000;">logger1 critical message</span><span style="color: #800000;">'</span><span style="color: #000000;">)

logger2.debug(</span><span style="color: #800000;">'</span><span style="color: #800000;">logger2 debug message</span><span style="color: #800000;">'</span><span style="color: #000000;">)
logger2.info(</span><span style="color: #800000;">'</span><span style="color: #800000;">logger2 info message</span><span style="color: #800000;">'</span><span style="color: #000000;">)
logger2.warning(</span><span style="color: #800000;">'</span><span style="color: #800000;">logger2 warning message</span><span style="color: #800000;">'</span><span style="color: #000000;">)
logger2.error(</span><span style="color: #800000;">'</span><span style="color: #800000;">logger2 error message</span><span style="color: #800000;">'</span><span style="color: #000000;">)
logger2.critical(</span><span style="color: #800000;">'</span><span style="color: #800000;">logger2 critical message</span><span style="color: #800000;">'</span>)</pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./index_files/copycode.gif" alt="复制代码"></a></span></div></div>
<span class="cnblogs_code_collapse" style="display: none;">View Code</span></div>
<p>&nbsp; &nbsp; &nbsp; &nbsp;<em>完整代码2：</em></p>
<div class="cnblogs_code" onclick="cnblogs_code_show(&#39;b2dce7a5-3620-4c62-84a6-aa968f3cbb28&#39;)"><img id="code_img_closed_b2dce7a5-3620-4c62-84a6-aa968f3cbb28" class="code_img_closed" src="./index_files/ContractedBlock.gif" alt="" style="display: none;"><img id="code_img_opened_b2dce7a5-3620-4c62-84a6-aa968f3cbb28" class="code_img_opened" style="" onclick="cnblogs_code_hide(&#39;b2dce7a5-3620-4c62-84a6-aa968f3cbb28&#39;,event)" src="./index_files/ExpandedBlockStart.gif" alt="">
<div id="cnblogs_code_open_b2dce7a5-3620-4c62-84a6-aa968f3cbb28" class="cnblogs_code_hide" style="display: block;"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./index_files/copycode.gif" alt="复制代码"></a></span></div>
<pre><span style="color: #008000;">#</span><span style="color: #008000;">coding:utf-8  </span>
<span style="color: #0000ff;">import</span><span style="color: #000000;"> logging  
  
</span><span style="color: #008000;">#</span><span style="color: #008000;"> 创建一个logger    </span>
logger =<span style="color: #000000;"> logging.getLogger()  
  
logger1 </span>= logging.getLogger(<span style="color: #800000;">'</span><span style="color: #800000;">mylogger</span><span style="color: #800000;">'</span><span style="color: #000000;">)  
logger1.setLevel(logging.DEBUG)  
  
logger2 </span>= logging.getLogger(<span style="color: #800000;">'</span><span style="color: #800000;">mylogger</span><span style="color: #800000;">'</span><span style="color: #000000;">)  
logger2.setLevel(logging.INFO)  
  
logger3 </span>= logging.getLogger(<span style="color: #800000;">'</span><span style="color: #800000;">mylogger.child1</span><span style="color: #800000;">'</span><span style="color: #000000;">)  
logger3.setLevel(logging.WARNING)  
  
logger4 </span>= logging.getLogger(<span style="color: #800000;">'</span><span style="color: #800000;">mylogger.child1.child2</span><span style="color: #800000;">'</span><span style="color: #000000;">)  
logger4.setLevel(logging.DEBUG)  
  
logger5 </span>= logging.getLogger(<span style="color: #800000;">'</span><span style="color: #800000;">mylogger.child1.child2.child3</span><span style="color: #800000;">'</span><span style="color: #000000;">)  
logger5.setLevel(logging.DEBUG)  
  
</span><span style="color: #008000;">#</span><span style="color: #008000;"> 创建一个handler，用于写入日志文件    </span>
fh = logging.FileHandler(<span style="color: #800000;">'</span><span style="color: #800000;">/tmp/test.log</span><span style="color: #800000;">'</span><span style="color: #000000;">)  
  
</span><span style="color: #008000;">#</span><span style="color: #008000;"> 再创建一个handler，用于输出到控制台    </span>
ch =<span style="color: #000000;"> logging.StreamHandler()  
  
</span><span style="color: #008000;">#</span><span style="color: #008000;"> 定义handler的输出格式formatter    </span>
formatter = logging.Formatter(<span style="color: #800000;">'</span><span style="color: #800000;">%(asctime)s - %(name)s - %(levelname)s - %(message)s</span><span style="color: #800000;">'</span><span style="color: #000000;">)  
fh.setFormatter(formatter)  
ch.setFormatter(formatter)  
  
</span><span style="color: #008000;">#</span><span style="color: #008000;">定义一个filter  </span><span style="color: #008000;">
#</span><span style="color: #008000;">filter = logging.Filter('mylogger.child1.child2')  </span><span style="color: #008000;">
#</span><span style="color: #008000;">fh.addFilter(filter)    </span>
  
<span style="color: #008000;">#</span><span style="color: #008000;"> 给logger添加handler    </span><span style="color: #008000;">
#</span><span style="color: #008000;">logger.addFilter(filter)  </span>
<span style="color: #000000;">logger.addHandler(fh)  
logger.addHandler(ch)  
  
</span><span style="color: #008000;">#</span><span style="color: #008000;">logger1.addFilter(filter)  </span>
<span style="color: #000000;">logger1.addHandler(fh)  
logger1.addHandler(ch)  
  
logger2.addHandler(fh)  
logger2.addHandler(ch)  
  
</span><span style="color: #008000;">#</span><span style="color: #008000;">logger3.addFilter(filter)  </span>
<span style="color: #000000;">logger3.addHandler(fh)  
logger3.addHandler(ch)  
  
</span><span style="color: #008000;">#</span><span style="color: #008000;">logger4.addFilter(filter)  </span>
<span style="color: #000000;">logger4.addHandler(fh)  
logger4.addHandler(ch)  
  
logger5.addHandler(fh)  
logger5.addHandler(ch)  
  
</span><span style="color: #008000;">#</span><span style="color: #008000;"> 记录一条日志    </span>
logger.debug(<span style="color: #800000;">'</span><span style="color: #800000;">logger debug message</span><span style="color: #800000;">'</span><span style="color: #000000;">)  
logger.info(</span><span style="color: #800000;">'</span><span style="color: #800000;">logger info message</span><span style="color: #800000;">'</span><span style="color: #000000;">)  
logger.warning(</span><span style="color: #800000;">'</span><span style="color: #800000;">logger warning message</span><span style="color: #800000;">'</span><span style="color: #000000;">)  
logger.error(</span><span style="color: #800000;">'</span><span style="color: #800000;">logger error message</span><span style="color: #800000;">'</span><span style="color: #000000;">)  
logger.critical(</span><span style="color: #800000;">'</span><span style="color: #800000;">logger critical message</span><span style="color: #800000;">'</span><span style="color: #000000;">)  
  
logger1.debug(</span><span style="color: #800000;">'</span><span style="color: #800000;">logger1 debug message</span><span style="color: #800000;">'</span><span style="color: #000000;">)  
logger1.info(</span><span style="color: #800000;">'</span><span style="color: #800000;">logger1 info message</span><span style="color: #800000;">'</span><span style="color: #000000;">)  
logger1.warning(</span><span style="color: #800000;">'</span><span style="color: #800000;">logger1 warning message</span><span style="color: #800000;">'</span><span style="color: #000000;">)  
logger1.error(</span><span style="color: #800000;">'</span><span style="color: #800000;">logger1 error message</span><span style="color: #800000;">'</span><span style="color: #000000;">)  
logger1.critical(</span><span style="color: #800000;">'</span><span style="color: #800000;">logger1 critical message</span><span style="color: #800000;">'</span><span style="color: #000000;">)  
  
logger2.debug(</span><span style="color: #800000;">'</span><span style="color: #800000;">logger2 debug message</span><span style="color: #800000;">'</span><span style="color: #000000;">)  
logger2.info(</span><span style="color: #800000;">'</span><span style="color: #800000;">logger2 info message</span><span style="color: #800000;">'</span><span style="color: #000000;">)  
logger2.warning(</span><span style="color: #800000;">'</span><span style="color: #800000;">logger2 warning message</span><span style="color: #800000;">'</span><span style="color: #000000;">)  
logger2.error(</span><span style="color: #800000;">'</span><span style="color: #800000;">logger2 error message</span><span style="color: #800000;">'</span><span style="color: #000000;">)  
logger2.critical(</span><span style="color: #800000;">'</span><span style="color: #800000;">logger2 critical message</span><span style="color: #800000;">'</span><span style="color: #000000;">)  
  
logger3.debug(</span><span style="color: #800000;">'</span><span style="color: #800000;">logger3 debug message</span><span style="color: #800000;">'</span><span style="color: #000000;">)  
logger3.info(</span><span style="color: #800000;">'</span><span style="color: #800000;">logger3 info message</span><span style="color: #800000;">'</span><span style="color: #000000;">)  
logger3.warning(</span><span style="color: #800000;">'</span><span style="color: #800000;">logger3 warning message</span><span style="color: #800000;">'</span><span style="color: #000000;">)  
logger3.error(</span><span style="color: #800000;">'</span><span style="color: #800000;">logger3 error message</span><span style="color: #800000;">'</span><span style="color: #000000;">)  
logger3.critical(</span><span style="color: #800000;">'</span><span style="color: #800000;">logger3 critical message</span><span style="color: #800000;">'</span><span style="color: #000000;">)  
  
logger4.debug(</span><span style="color: #800000;">'</span><span style="color: #800000;">logger4 debug message</span><span style="color: #800000;">'</span><span style="color: #000000;">)  
logger4.info(</span><span style="color: #800000;">'</span><span style="color: #800000;">logger4 info message</span><span style="color: #800000;">'</span><span style="color: #000000;">)  
logger4.warning(</span><span style="color: #800000;">'</span><span style="color: #800000;">logger4 warning message</span><span style="color: #800000;">'</span><span style="color: #000000;">)  
logger4.error(</span><span style="color: #800000;">'</span><span style="color: #800000;">logger4 error message</span><span style="color: #800000;">'</span><span style="color: #000000;">)  
logger4.critical(</span><span style="color: #800000;">'</span><span style="color: #800000;">logger4 critical message</span><span style="color: #800000;">'</span><span style="color: #000000;">)  
  
logger5.debug(</span><span style="color: #800000;">'</span><span style="color: #800000;">logger5 debug message</span><span style="color: #800000;">'</span><span style="color: #000000;">)  
logger5.info(</span><span style="color: #800000;">'</span><span style="color: #800000;">logger5 info message</span><span style="color: #800000;">'</span><span style="color: #000000;">)  
logger5.warning(</span><span style="color: #800000;">'</span><span style="color: #800000;">logger5 warning message</span><span style="color: #800000;">'</span><span style="color: #000000;">)  
logger5.error(</span><span style="color: #800000;">'</span><span style="color: #800000;">logger5 error message</span><span style="color: #800000;">'</span><span style="color: #000000;">)  
logger5.critical(</span><span style="color: #800000;">'</span><span style="color: #800000;">logger5 critical message</span><span style="color: #800000;">'</span>)  </pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./index_files/copycode.gif" alt="复制代码"></a></span></div></div>
<span class="cnblogs_code_collapse" style="display: none;">View Code</span></div>
<p>应用：&nbsp; &nbsp; &nbsp;</p>
<div class="cnblogs_code" onclick="cnblogs_code_show(&#39;33924068-0f8e-4a5a-9535-9ab634ff2678&#39;)"><img id="code_img_closed_33924068-0f8e-4a5a-9535-9ab634ff2678" class="code_img_closed" src="./index_files/ContractedBlock.gif" alt="" style="display: none;"><img id="code_img_opened_33924068-0f8e-4a5a-9535-9ab634ff2678" class="code_img_opened" style="" onclick="cnblogs_code_hide(&#39;33924068-0f8e-4a5a-9535-9ab634ff2678&#39;,event)" src="./index_files/ExpandedBlockStart.gif" alt="">
<div id="cnblogs_code_open_33924068-0f8e-4a5a-9535-9ab634ff2678" class="cnblogs_code_hide" style="display: block;"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./index_files/copycode.gif" alt="复制代码"></a></span></div>
<pre><span style="color: #0000ff;">import</span><span style="color: #000000;"> os
</span><span style="color: #0000ff;">import</span><span style="color: #000000;"> time
</span><span style="color: #0000ff;">import</span><span style="color: #000000;"> logging
</span><span style="color: #0000ff;">from</span> config <span style="color: #0000ff;">import</span><span style="color: #000000;"> settings


</span><span style="color: #0000ff;">def</span><span style="color: #000000;"> get_logger(card_num, struct_time):

    </span><span style="color: #0000ff;">if</span> struct_time.tm_mday &lt; 23<span style="color: #000000;">:
        file_name </span>= <span style="color: #800000;">"</span><span style="color: #800000;">%s_%s_%d</span><span style="color: #800000;">"</span> %(struct_time.tm_year, struct_time.tm_mon, 22<span style="color: #000000;">)
    </span><span style="color: #0000ff;">else</span><span style="color: #000000;">:
        file_name </span>= <span style="color: #800000;">"</span><span style="color: #800000;">%s_%s_%d</span><span style="color: #800000;">"</span> %(struct_time.tm_year, struct_time.tm_mon+1, 22<span style="color: #000000;">)

    file_handler </span>=<span style="color: #000000;"> logging.FileHandler(
        os.path.join(settings.USER_DIR_FOLDER, card_num, </span><span style="color: #800000;">'</span><span style="color: #800000;">record</span><span style="color: #800000;">'</span><span style="color: #000000;">, file_name),
        encoding</span>=<span style="color: #800000;">'</span><span style="color: #800000;">utf-8</span><span style="color: #800000;">'</span><span style="color: #000000;">
    )
    fmt </span>= logging.Formatter(fmt=<span style="color: #800000;">"</span><span style="color: #800000;">%(asctime)s :  %(message)s</span><span style="color: #800000;">"</span><span style="color: #000000;">)
    file_handler.setFormatter(fmt)

    logger1 </span>= logging.Logger(<span style="color: #800000;">'</span><span style="color: #800000;">user_logger</span><span style="color: #800000;">'</span>, level=<span style="color: #000000;">logging.INFO)
    logger1.addHandler(file_handler)
    </span><span style="color: #0000ff;">return</span> logger1</pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./index_files/copycode.gif" alt="复制代码"></a></span></div></div>
<span class="cnblogs_code_collapse" style="display: none;">View Code</span></div>
<h3>&nbsp;re模块(<span style="color: #ff9900;">* * * * *</span>)</h3>
<p>就其本质而言，正则表达式（或 RE）是一种小型的、高度专业化的编程语言，（在Python中）它内嵌在Python中，并通过 re 模块实现。正则表达式模式被编译成一系列的字节码，然后由用 C 编写的匹配引擎执行。</p>
<p>字符匹配（普通字符，元字符）：</p>
<p>1 普通字符：大多数字符和字母都会和自身匹配<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;&gt;&gt;&gt; re.findall('alvin','yuanaleSxalexwupeiqi')<br>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; ['alvin']&nbsp;</p>
<p>2 元字符：.   ^   $   *   +   ?   { }   [ ]   |   ( ) \</p>
<h4>元字符之. ^ $ * + ? { }</h4>
<div class="cnblogs_Highlighter sh-gutter">
<div><div id="highlighter_618878" class="syntaxhighlighter  python"><div class="toolbar"><span><a href="http://www.cnblogs.com/yuanchenqi/articles/5732581.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python keyword">import</code> <code class="python plain">re</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="python plain">ret</code><code class="python keyword">=</code><code class="python plain">re.findall(</code><code class="python string">'a..in'</code><code class="python plain">,</code><code class="python string">'helloalvin'</code><code class="python plain">)</code></div><div class="line number4 index3 alt1"><code class="python functions">print</code><code class="python plain">(ret)</code><code class="python comments">#['alvin']</code></div><div class="line number5 index4 alt2">&nbsp;</div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="python plain">ret</code><code class="python keyword">=</code><code class="python plain">re.findall(</code><code class="python string">'^a...n'</code><code class="python plain">,</code><code class="python string">'alvinhelloawwwn'</code><code class="python plain">)</code></div><div class="line number8 index7 alt1"><code class="python functions">print</code><code class="python plain">(ret)</code><code class="python comments">#['alvin']</code></div><div class="line number9 index8 alt2">&nbsp;</div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2"><code class="python plain">ret</code><code class="python keyword">=</code><code class="python plain">re.findall(</code><code class="python string">'a...n$'</code><code class="python plain">,</code><code class="python string">'alvinhelloawwwn'</code><code class="python plain">)</code></div><div class="line number12 index11 alt1"><code class="python functions">print</code><code class="python plain">(ret)</code><code class="python comments">#['awwwn']</code></div><div class="line number13 index12 alt2">&nbsp;</div><div class="line number14 index13 alt1">&nbsp;</div><div class="line number15 index14 alt2"><code class="python plain">ret</code><code class="python keyword">=</code><code class="python plain">re.findall(</code><code class="python string">'a...n$'</code><code class="python plain">,</code><code class="python string">'alvinhelloawwwn'</code><code class="python plain">)</code></div><div class="line number16 index15 alt1"><code class="python functions">print</code><code class="python plain">(ret)</code><code class="python comments">#['awwwn']</code></div><div class="line number17 index16 alt2">&nbsp;</div><div class="line number18 index17 alt1">&nbsp;</div><div class="line number19 index18 alt2"><code class="python plain">ret</code><code class="python keyword">=</code><code class="python plain">re.findall(</code><code class="python string">'abc*'</code><code class="python plain">,</code><code class="python string">'abcccc'</code><code class="python plain">)</code><code class="python comments">#贪婪匹配[0,+oo]&nbsp;&nbsp; </code></div><div class="line number20 index19 alt1"><code class="python functions">print</code><code class="python plain">(ret)</code><code class="python comments">#['abcccc']</code></div><div class="line number21 index20 alt2">&nbsp;</div><div class="line number22 index21 alt1"><code class="python plain">ret</code><code class="python keyword">=</code><code class="python plain">re.findall(</code><code class="python string">'abc+'</code><code class="python plain">,</code><code class="python string">'abccc'</code><code class="python plain">)</code><code class="python comments">#[1,+oo]</code></div><div class="line number23 index22 alt2"><code class="python functions">print</code><code class="python plain">(ret)</code><code class="python comments">#['abccc']</code></div><div class="line number24 index23 alt1">&nbsp;</div><div class="line number25 index24 alt2"><code class="python plain">ret</code><code class="python keyword">=</code><code class="python plain">re.findall(</code><code class="python string">'abc?'</code><code class="python plain">,</code><code class="python string">'abccc'</code><code class="python plain">)</code><code class="python comments">#[0,1]</code></div><div class="line number26 index25 alt1"><code class="python functions">print</code><code class="python plain">(ret)</code><code class="python comments">#['abc']</code></div><div class="line number27 index26 alt2">&nbsp;</div><div class="line number28 index27 alt1">&nbsp;</div><div class="line number29 index28 alt2"><code class="python plain">ret</code><code class="python keyword">=</code><code class="python plain">re.findall(</code><code class="python string">'abc{1,4}'</code><code class="python plain">,</code><code class="python string">'abccc'</code><code class="python plain">)</code></div><div class="line number30 index29 alt1"><code class="python functions">print</code><code class="python plain">(ret)</code><code class="python comments">#['abccc'] 贪婪匹配</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>注意：前面的*,+,?等都是贪婪匹配，也就是尽可能匹配，后面加?号使其变成惰性匹配</p>
<div class="cnblogs_Highlighter sh-gutter">
<div><div id="highlighter_726213" class="syntaxhighlighter  python"><div class="toolbar"><span><a href="http://www.cnblogs.com/yuanchenqi/articles/5732581.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python plain">ret</code><code class="python keyword">=</code><code class="python plain">re.findall(</code><code class="python string">'abc*?'</code><code class="python plain">,</code><code class="python string">'abcccccc'</code><code class="python plain">)</code></div><div class="line number2 index1 alt1"><code class="python functions">print</code><code class="python plain">(ret)</code><code class="python comments">#['ab']</code></div></div></td></tr></tbody></table></div></div>
</div>
<h4>元字符之字符集［］：</h4>
<div class="cnblogs_Highlighter sh-gutter">
<div><div id="highlighter_104820" class="syntaxhighlighter  python"><div class="toolbar"><span><a href="http://www.cnblogs.com/yuanchenqi/articles/5732581.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python comments">#--------------------------------------------字符集[]</code></div><div class="line number2 index1 alt1"><code class="python plain">ret</code><code class="python keyword">=</code><code class="python plain">re.findall(</code><code class="python string">'a[bc]d'</code><code class="python plain">,</code><code class="python string">'acd'</code><code class="python plain">)</code></div><div class="line number3 index2 alt2"><code class="python functions">print</code><code class="python plain">(ret)</code><code class="python comments">#['acd']</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="python plain">ret</code><code class="python keyword">=</code><code class="python plain">re.findall(</code><code class="python string">'[a-z]'</code><code class="python plain">,</code><code class="python string">'acd'</code><code class="python plain">)</code></div><div class="line number6 index5 alt1"><code class="python functions">print</code><code class="python plain">(ret)</code><code class="python comments">#['a', 'c', 'd']</code></div><div class="line number7 index6 alt2">&nbsp;</div><div class="line number8 index7 alt1"><code class="python plain">ret</code><code class="python keyword">=</code><code class="python plain">re.findall(</code><code class="python string">'[.*+]'</code><code class="python plain">,</code><code class="python string">'a.cd+'</code><code class="python plain">)</code></div><div class="line number9 index8 alt2"><code class="python functions">print</code><code class="python plain">(ret)</code><code class="python comments">#['.', '+']</code></div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2"><code class="python comments">#在字符集里有功能的符号: - ^ \</code></div><div class="line number12 index11 alt1">&nbsp;</div><div class="line number13 index12 alt2"><code class="python plain">ret</code><code class="python keyword">=</code><code class="python plain">re.findall(</code><code class="python string">'[1-9]'</code><code class="python plain">,</code><code class="python string">'45dha3'</code><code class="python plain">)</code></div><div class="line number14 index13 alt1"><code class="python functions">print</code><code class="python plain">(ret)</code><code class="python comments">#['4', '5', '3']</code></div><div class="line number15 index14 alt2">&nbsp;</div><div class="line number16 index15 alt1"><code class="python plain">ret</code><code class="python keyword">=</code><code class="python plain">re.findall(</code><code class="python string">'[^ab]'</code><code class="python plain">,</code><code class="python string">'45bdha3'</code><code class="python plain">)</code></div><div class="line number17 index16 alt2"><code class="python functions">print</code><code class="python plain">(ret)</code><code class="python comments">#['4', '5', 'd', 'h', '3']</code></div><div class="line number18 index17 alt1">&nbsp;</div><div class="line number19 index18 alt2"><code class="python plain">ret</code><code class="python keyword">=</code><code class="python plain">re.findall(</code><code class="python string">'[\d]'</code><code class="python plain">,</code><code class="python string">'45bdha3'</code><code class="python plain">)</code></div><div class="line number20 index19 alt1"><code class="python functions">print</code><code class="python plain">(ret)</code><code class="python comments">#['4', '5', '3']</code></div></div></td></tr></tbody></table></div></div>
</div>
<h4>元字符之转义符\</h4>
<p><span style="color: #800080;">反斜杠后边跟元字符去除特殊功能,比如\.</span><br><span style="color: #800080;">反斜杠后边跟普通字符实现特殊功能,比如\d</span></p>
<p style="margin-left: 30px;">\d &nbsp;匹配任何十进制数；它相当于类 [0-9]。<br>\D  匹配任何非数字字符；它相当于类 [^0-9]。<br>\s &nbsp;匹配任何空白字符；它相当于类  [ \t\n\r\f\v]。<br>\S  匹配任何非空白字符；它相当于类 [^ \t\n\r\f\v]。<br>\w  匹配任何字母数字字符；它相当于类 [a-zA-Z0-9_]。<br>\W  匹配任何非字母数字字符；它相当于类 [^a-zA-Z0-9_]<br>\b &nbsp;匹配一个特殊字符边界，比如空格 ，&amp;，＃等</p>
<div class="cnblogs_Highlighter sh-gutter">
<div><div id="highlighter_173280" class="syntaxhighlighter  python"><div class="toolbar"><span><a href="http://www.cnblogs.com/yuanchenqi/articles/5732581.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python plain">ret</code><code class="python keyword">=</code><code class="python plain">re.findall(</code><code class="python string">'I\b'</code><code class="python plain">,</code><code class="python string">'I am LIST'</code><code class="python plain">)</code></div><div class="line number2 index1 alt1"><code class="python functions">print</code><code class="python plain">(ret)</code><code class="python comments">#[]</code></div><div class="line number3 index2 alt2"><code class="python plain">ret</code><code class="python keyword">=</code><code class="python plain">re.findall(r</code><code class="python string">'I\b'</code><code class="python plain">,</code><code class="python string">'I am LIST'</code><code class="python plain">)</code></div><div class="line number4 index3 alt1"><code class="python functions">print</code><code class="python plain">(ret)</code><code class="python comments">#['I']</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>现在我们聊一聊\,先看下面两个匹配：</p>
<div class="cnblogs_Highlighter sh-gutter">
<div><div id="highlighter_309007" class="syntaxhighlighter  python"><div class="toolbar"><span><a href="http://www.cnblogs.com/yuanchenqi/articles/5732581.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python comments">#-----------------------------eg1:</code></div><div class="line number2 index1 alt1"><code class="python keyword">import</code> <code class="python plain">re</code></div><div class="line number3 index2 alt2"><code class="python plain">ret</code><code class="python keyword">=</code><code class="python plain">re.findall(</code><code class="python string">'c\l'</code><code class="python plain">,</code><code class="python string">'abc\le'</code><code class="python plain">)</code></div><div class="line number4 index3 alt1"><code class="python functions">print</code><code class="python plain">(ret)</code><code class="python comments">#[]</code></div><div class="line number5 index4 alt2"><code class="python plain">ret</code><code class="python keyword">=</code><code class="python plain">re.findall(</code><code class="python string">'c\\l'</code><code class="python plain">,</code><code class="python string">'abc\le'</code><code class="python plain">)</code></div><div class="line number6 index5 alt1"><code class="python functions">print</code><code class="python plain">(ret)</code><code class="python comments">#[]</code></div><div class="line number7 index6 alt2"><code class="python plain">ret</code><code class="python keyword">=</code><code class="python plain">re.findall(</code><code class="python string">'c\\\\l'</code><code class="python plain">,</code><code class="python string">'abc\le'</code><code class="python plain">)</code></div><div class="line number8 index7 alt1"><code class="python functions">print</code><code class="python plain">(ret)</code><code class="python comments">#['c\\l']</code></div><div class="line number9 index8 alt2"><code class="python plain">ret</code><code class="python keyword">=</code><code class="python plain">re.findall(r</code><code class="python string">'c\\l'</code><code class="python plain">,</code><code class="python string">'abc\le'</code><code class="python plain">)</code></div><div class="line number10 index9 alt1"><code class="python functions">print</code><code class="python plain">(ret)</code><code class="python comments">#['c\\l']</code></div><div class="line number11 index10 alt2">&nbsp;</div><div class="line number12 index11 alt1"><code class="python comments">#-----------------------------eg2:</code></div><div class="line number13 index12 alt2"><code class="python comments">#之所以选择\b是因为\b在ASCII表中是有意义的</code></div><div class="line number14 index13 alt1"><code class="python plain">m </code><code class="python keyword">=</code> <code class="python plain">re.findall(</code><code class="python string">'\bblow'</code><code class="python plain">, </code><code class="python string">'blow'</code><code class="python plain">)</code></div><div class="line number15 index14 alt2"><code class="python functions">print</code><code class="python plain">(m)</code></div><div class="line number16 index15 alt1"><code class="python plain">m </code><code class="python keyword">=</code> <code class="python plain">re.findall(r</code><code class="python string">'\bblow'</code><code class="python plain">, </code><code class="python string">'blow'</code><code class="python plain">)</code></div><div class="line number17 index16 alt2"><code class="python functions">print</code><code class="python plain">(m)</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;<img src="./index_files/877318-20160911221511963-1888449004.png" alt="" width="366" height="182">　　</p>
<h4>元字符之分组()</h4>
<div class="cnblogs_Highlighter sh-gutter">
<div><div id="highlighter_594308" class="syntaxhighlighter  python"><div class="toolbar"><span><a href="http://www.cnblogs.com/yuanchenqi/articles/5732581.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python plain">m </code><code class="python keyword">=</code> <code class="python plain">re.findall(r</code><code class="python string">'(ad)+'</code><code class="python plain">, </code><code class="python string">'add'</code><code class="python plain">)</code></div><div class="line number2 index1 alt1"><code class="python functions">print</code><code class="python plain">(m)</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="python plain">ret</code><code class="python keyword">=</code><code class="python plain">re.search(</code><code class="python string">'(?P&lt;id&gt;\d{2})/(?P&lt;name&gt;\w{3})'</code><code class="python plain">,</code><code class="python string">'23/com'</code><code class="python plain">)</code></div><div class="line number5 index4 alt2"><code class="python functions">print</code><code class="python plain">(ret.group())</code><code class="python comments">#23/com</code></div><div class="line number6 index5 alt1"><code class="python functions">print</code><code class="python plain">(ret.group(</code><code class="python string">'id'</code><code class="python plain">))</code><code class="python comments">#23</code></div></div></td></tr></tbody></table></div></div>
</div>
<h4>元字符之｜</h4>
<div class="cnblogs_Highlighter sh-gutter">
<div><div id="highlighter_392436" class="syntaxhighlighter  python"><div class="toolbar"><span><a href="http://www.cnblogs.com/yuanchenqi/articles/5732581.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python plain">ret</code><code class="python keyword">=</code><code class="python plain">re.search(</code><code class="python string">'(ab)|\d'</code><code class="python plain">,</code><code class="python string">'rabhdg8sd'</code><code class="python plain">)</code></div><div class="line number2 index1 alt1"><code class="python functions">print</code><code class="python plain">(ret.group())</code><code class="python comments">#ab</code></div></div></td></tr></tbody></table></div></div>
</div>
<h4>re模块下的常用方法</h4>
<div class="cnblogs_Highlighter sh-gutter">
<div><div id="highlighter_547033" class="syntaxhighlighter  python"><div class="toolbar"><span><a href="http://www.cnblogs.com/yuanchenqi/articles/5732581.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python keyword">import</code> <code class="python plain">re</code></div><div class="line number2 index1 alt1"><code class="python comments">#1</code></div><div class="line number3 index2 alt2"><code class="python plain">re.findall(</code><code class="python string">'a'</code><code class="python plain">,</code><code class="python string">'alvin yuan'</code><code class="python plain">)&nbsp;&nbsp;&nbsp; </code><code class="python comments">#返回所有满足匹配条件的结果,放在列表里</code></div><div class="line number4 index3 alt1"><code class="python comments">#2</code></div><div class="line number5 index4 alt2"><code class="python plain">re.search(</code><code class="python string">'a'</code><code class="python plain">,</code><code class="python string">'alvin yuan'</code><code class="python plain">).group()&nbsp; </code><code class="python comments">#函数会在字符串内查找模式匹配,只到找到第一个匹配然后返回一个包含匹配信息的对象,该对象可以</code></div><div class="line number6 index5 alt1"><code class="python spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="python comments"># 通过调用group()方法得到匹配的字符串,如果字符串没有匹配，则返回None。</code></div><div class="line number7 index6 alt2">&nbsp;</div><div class="line number8 index7 alt1"><code class="python comments">#3</code></div><div class="line number9 index8 alt2"><code class="python plain">re.match(</code><code class="python string">'a'</code><code class="python plain">,</code><code class="python string">'abc'</code><code class="python plain">).group()&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="python comments">#同search,不过尽在字符串开始处进行匹配</code></div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2"><code class="python comments">#4</code></div><div class="line number12 index11 alt1"><code class="python plain">ret</code><code class="python keyword">=</code><code class="python plain">re.split(</code><code class="python string">'[ab]'</code><code class="python plain">,</code><code class="python string">'abcd'</code><code class="python plain">)&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="python comments">#先按'a'分割得到''和'bcd',在对''和'bcd'分别按'b'分割</code></div><div class="line number13 index12 alt2"><code class="python functions">print</code><code class="python plain">(ret)</code><code class="python comments">#['', '', 'cd']</code></div><div class="line number14 index13 alt1">&nbsp;</div><div class="line number15 index14 alt2"><code class="python comments">#5</code></div><div class="line number16 index15 alt1"><code class="python plain">ret</code><code class="python keyword">=</code><code class="python plain">re.sub(</code><code class="python string">'\d'</code><code class="python plain">,</code><code class="python string">'abc'</code><code class="python plain">,</code><code class="python string">'alvin5yuan6'</code><code class="python plain">,</code><code class="python value">1</code><code class="python plain">)</code></div><div class="line number17 index16 alt2"><code class="python functions">print</code><code class="python plain">(ret)</code><code class="python comments">#alvinabcyuan6</code></div><div class="line number18 index17 alt1"><code class="python plain">ret</code><code class="python keyword">=</code><code class="python plain">re.subn(</code><code class="python string">'\d'</code><code class="python plain">,</code><code class="python string">'abc'</code><code class="python plain">,</code><code class="python string">'alvin5yuan6'</code><code class="python plain">)</code></div><div class="line number19 index18 alt2"><code class="python functions">print</code><code class="python plain">(ret)</code><code class="python comments">#('alvinabcyuanabc', 2)</code></div><div class="line number20 index19 alt1">&nbsp;</div><div class="line number21 index20 alt2"><code class="python comments">#6</code></div><div class="line number22 index21 alt1"><code class="python plain">obj</code><code class="python keyword">=</code><code class="python plain">re.</code><code class="python functions">compile</code><code class="python plain">(</code><code class="python string">'\d{3}'</code><code class="python plain">)</code></div><div class="line number23 index22 alt2"><code class="python plain">ret</code><code class="python keyword">=</code><code class="python plain">obj.search(</code><code class="python string">'abc123eeee'</code><code class="python plain">)</code></div><div class="line number24 index23 alt1"><code class="python functions">print</code><code class="python plain">(ret.group())</code><code class="python comments">#123</code></div></div></td></tr></tbody></table></div></div>
</div>
<div class="cnblogs_Highlighter sh-gutter">
<div><div id="highlighter_465903" class="syntaxhighlighter  python"><div class="toolbar"><span><a href="http://www.cnblogs.com/yuanchenqi/articles/5732581.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python keyword">import</code> <code class="python plain">re</code></div><div class="line number2 index1 alt1"><code class="python plain">ret</code><code class="python keyword">=</code><code class="python plain">re.finditer(</code><code class="python string">'\d'</code><code class="python plain">,</code><code class="python string">'ds3sy4784a'</code><code class="python plain">)</code></div><div class="line number3 index2 alt2"><code class="python functions">print</code><code class="python plain">(ret)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code><code class="python comments">#&lt;callable_iterator object at 0x10195f940&gt;</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="python functions">print</code><code class="python plain">(</code><code class="python functions">next</code><code class="python plain">(ret).group())</code></div><div class="line number6 index5 alt1"><code class="python functions">print</code><code class="python plain">(</code><code class="python functions">next</code><code class="python plain">(ret).group())</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>注意：</p>
<div class="cnblogs_Highlighter sh-gutter">
<div><div id="highlighter_270718" class="syntaxhighlighter  python"><div class="toolbar"><span><a href="http://www.cnblogs.com/yuanchenqi/articles/5732581.html#" class="toolbar_item command_help help">?</a></span></div><table border="0" cellpadding="0" cellspacing="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="python keyword">import</code> <code class="python plain">re</code></div><div class="line number2 index1 alt1">&nbsp;</div><div class="line number3 index2 alt2"><code class="python plain">ret</code><code class="python keyword">=</code><code class="python plain">re.findall(</code><code class="python string">'www.(baidu|oldboy).com'</code><code class="python plain">,</code><code class="python string">'www.oldboy.com'</code><code class="python plain">)</code></div><div class="line number4 index3 alt1"><code class="python functions">print</code><code class="python plain">(ret)</code><code class="python comments">#['oldboy']&nbsp;&nbsp;&nbsp;&nbsp; 这是因为findall会优先把匹配结果组里内容返回,如果想要匹配结果,取消权限即可</code></div><div class="line number5 index4 alt2">&nbsp;</div><div class="line number6 index5 alt1"><code class="python plain">ret</code><code class="python keyword">=</code><code class="python plain">re.findall(</code><code class="python string">'www.(?:baidu|oldboy).com'</code><code class="python plain">,</code><code class="python string">'www.oldboy.com'</code><code class="python plain">)</code></div><div class="line number7 index6 alt2"><code class="python functions">print</code><code class="python plain">(ret)</code><code class="python comments">#['www.oldboy.com']</code></div></div></td></tr></tbody></table></div></div>
</div>
<p>补充：</p>
<div class="cnblogs_code" onclick="cnblogs_code_show(&#39;419871c8-6659-4523-a2fb-841b6c63f020&#39;)"><img id="code_img_closed_419871c8-6659-4523-a2fb-841b6c63f020" class="code_img_closed" src="./index_files/ContractedBlock.gif" alt="" style="display: none;"><img id="code_img_opened_419871c8-6659-4523-a2fb-841b6c63f020" class="code_img_opened" style="" onclick="cnblogs_code_hide(&#39;419871c8-6659-4523-a2fb-841b6c63f020&#39;,event)" src="./index_files/ExpandedBlockStart.gif" alt="">
<div id="cnblogs_code_open_419871c8-6659-4523-a2fb-841b6c63f020" class="cnblogs_code_hide" style="display: block;">
<pre><span style="color: #0000ff;">import</span><span style="color: #000000;"> re

</span><span style="color: #0000ff;">print</span>(re.findall(<span style="color: #800000;">"</span><span style="color: #800000;">&lt;(?P&lt;tag_name&gt;\w+)&gt;\w+&lt;/(?P=tag_name)&gt;</span><span style="color: #800000;">"</span>,<span style="color: #800000;">"</span><span style="color: #800000;">&lt;h1&gt;hello&lt;/h1&gt;</span><span style="color: #800000;">"</span><span style="color: #000000;">))
</span><span style="color: #0000ff;">print</span>(re.search(<span style="color: #800000;">"</span><span style="color: #800000;">&lt;(?P&lt;tag_name&gt;\w+)&gt;\w+&lt;/(?P=tag_name)&gt;</span><span style="color: #800000;">"</span>,<span style="color: #800000;">"</span><span style="color: #800000;">&lt;h1&gt;hello&lt;/h1&gt;</span><span style="color: #800000;">"</span><span style="color: #000000;">))
</span><span style="color: #0000ff;">print</span>(re.search(r<span style="color: #800000;">"</span><span style="color: #800000;">&lt;(\w+)&gt;\w+&lt;/\1&gt;</span><span style="color: #800000;">"</span>,<span style="color: #800000;">"</span><span style="color: #800000;">&lt;h1&gt;hello&lt;/h1&gt;</span><span style="color: #800000;">"</span>))</pre>
</div>
<span class="cnblogs_code_collapse" style="display: none;">View Code</span></div>
<p>补充2</p>
<div class="cnblogs_code" onclick="cnblogs_code_show(&#39;acfaf707-d948-4721-8d76-6b8d31a3a81d&#39;)"><img id="code_img_closed_acfaf707-d948-4721-8d76-6b8d31a3a81d" class="code_img_closed" src="./index_files/ContractedBlock.gif" alt="" style="display: none;"><img id="code_img_opened_acfaf707-d948-4721-8d76-6b8d31a3a81d" class="code_img_opened" style="display: inline;" onclick="cnblogs_code_hide(&#39;acfaf707-d948-4721-8d76-6b8d31a3a81d&#39;,event)" src="./index_files/ExpandedBlockStart.gif" alt="">
<div id="cnblogs_code_open_acfaf707-d948-4721-8d76-6b8d31a3a81d" class="cnblogs_code_hide" style="display: block;"><div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./index_files/copycode.gif" alt="复制代码"></a></span></div>
<pre><span style="color: #008000;">#</span><span style="color: #008000;">匹配出所有的整数</span>
<span style="color: #0000ff;">import</span><span style="color: #000000;"> re

</span><span style="color: #008000;">#</span><span style="color: #008000;">ret=re.findall(r"\d+{0}]","1-2*(60+(-40.35/5)-(-4*3))")</span>
ret=re.findall(r<span style="color: #800000;">"</span><span style="color: #800000;">-?\d+\.\d*|(-?\d+)</span><span style="color: #800000;">"</span>,<span style="color: #800000;">"</span><span style="color: #800000;">1-2*(60+(-40.35/5)-(-4*3))</span><span style="color: #800000;">"</span><span style="color: #000000;">)
ret.remove(</span><span style="color: #800000;">""</span><span style="color: #000000;">)

</span><span style="color: #0000ff;">print</span>(ret)</pre>
<div class="cnblogs_code_toolbar"><span class="cnblogs_code_copy"><a href="javascript:void(0);" onclick="copyCnblogsCode(this)" title="复制代码"><img src="./index_files/copycode.gif" alt="复制代码"></a></span></div></div>
<span class="cnblogs_code_collapse" style="display: none;">View Code</span></div>
<p>&nbsp;</p>
<p>　　</p>
<p>　　</p>
<p>　　</p>
<h4><em>　　</em></h4>
<h4>&nbsp;</h4>
<p>&nbsp;</p>
<p>　</p>
<p style="margin-left: 30px;">&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;</p>
<p style="margin-left: 30px;">&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>　　</p>
<p>&nbsp;</p>
<p>　　</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp;</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp; &nbsp;&nbsp;</p>
<p><br>&nbsp; &nbsp; &nbsp; &nbsp;</p>
<p>&nbsp; &nbsp; &nbsp;</p>
<p>&nbsp; &nbsp; &nbsp;</p>
<p>&nbsp; &nbsp; &nbsp; &nbsp;</p>
<p>&nbsp; &nbsp;&nbsp;</p></div><div id="MySignature"></div>
<div class="clear"></div>
<div id="blog_post_info_block">
<div id="BlogPostCategory"></div>
<div id="EntryTag"></div>
<div id="blog_post_info"><div id="green_channel">
        <a href="javascript:void(0);" id="green_channel_digg" onclick="DiggIt(5732581,cb_blogId,1);green_channel_success(this,&#39;谢谢推荐！&#39;);">好文要顶</a>
            <a id="green_channel_follow" onclick="follow(&#39;6d0ad0ce-3cb7-e511-9fc1-ac853d9f53cc&#39;);" href="javascript:void(0);">关注我</a>
    <a id="green_channel_favorite" onclick="AddToWz(cb_entryId);return false;" href="javascript:void(0);">收藏该文</a>
    <a id="green_channel_weibo" href="javascript:void(0);" title="分享至新浪微博" onclick="ShareToTsina()"><img src="./index_files/icon_weibo_24.png" alt=""></a>
    <a id="green_channel_wechat" href="javascript:void(0);" title="分享至微信" onclick="shareOnWechat()"><img src="./index_files/wechat.png" alt=""></a>
</div>
<div id="author_profile">
    <div id="author_profile_info" class="author_profile_info">
            <a href="http://home.cnblogs.com/u/yuanchenqi/" target="_blank"><img src="./index_files/20160110101629.png" class="author_avatar" alt=""></a>
        <div id="author_profile_detail" class="author_profile_info">
            <a href="http://home.cnblogs.com/u/yuanchenqi/">Yuan先生</a><br>
            <a href="http://home.cnblogs.com/u/yuanchenqi/followees">关注 - 0</a><br>
            <a href="http://home.cnblogs.com/u/yuanchenqi/followers">粉丝 - 790</a>
        </div>
    </div>
    <div class="clear"></div>
    <div id="author_profile_honor"></div>
    <div id="author_profile_follow">
                <a href="javascript:void(0);" onclick="follow(&#39;6d0ad0ce-3cb7-e511-9fc1-ac853d9f53cc&#39;);return false;">+加关注</a>
    </div>
</div>
<div id="div_digg">
    <div class="diggit" onclick="votePost(5732581,&#39;Digg&#39;)">
        <span class="diggnum" id="digg_count">5</span>
    </div>
    <div class="buryit" onclick="votePost(5732581,&#39;Bury&#39;)">
        <span class="burynum" id="bury_count">0</span>
    </div>
    <div class="clear"></div>
    <div class="diggword" id="digg_tips">
    </div>
</div>
<script type="text/javascript">
    currentDiggType = 0;
</script></div>
<div class="clear"></div>
<div id="post_next_prev"><a href="http://www.cnblogs.com/yuanchenqi/articles/5722574.html" class="p_n_p_prefix">« </a> 上一篇：<a href="http://www.cnblogs.com/yuanchenqi/articles/5722574.html" title="发布于2016-07-31 10:56">Py西游攻关之IO model</a><br><a href="http://www.cnblogs.com/yuanchenqi/articles/5733873.html" class="p_n_p_prefix">» </a> 下一篇：<a href="http://www.cnblogs.com/yuanchenqi/articles/5733873.html" title="发布于2016-08-03 17:54">Py西游攻关之多线程(threading模块)</a><br></div>
</div>


		</div>
		<div class="postDesc">posted @ <span id="post-date">2016-08-03 13:39</span> <a href="http://www.cnblogs.com/yuanchenqi/">Yuan先生</a> 阅读(<span id="post_view_count">4796</span>) 评论(<span id="post_comment_count">1</span>) &nbsp;<a href="https://i.cnblogs.com/EditArticles.aspx?postid=5732581" rel="nofollow">编辑</a> <a href="http://www.cnblogs.com/yuanchenqi/articles/5732581.html#" onclick="AddToWz(5732581);return false;">收藏</a></div>
	</div>
	<script type="text/javascript">var allowComments=true,cb_blogId=262677,cb_entryId=5732581,cb_blogApp=currentBlogApp,cb_blogUserGuid='6d0ad0ce-3cb7-e511-9fc1-ac853d9f53cc',cb_entryCreatedDate='2016/8/3 13:39:00';loadViewCount(cb_entryId);var cb_postType=2;</script>
	
</div><!--end: topics 文章、评论容器-->
</div><a name="!comments"></a><div id="blog-comments-placeholder"><div id="comments_pager_top"></div>
<br>
<div class="feedback_area_title">评论列表</div>
<div class="feedbackNoItems"></div>	

		<div class="feedbackItem">
			<div class="feedbackListSubtitle">
				<div class="feedbackManage">
					&nbsp;&nbsp;<span class="comment_actions"></span>
				</div>
				<a href="http://www.cnblogs.com/yuanchenqi/articles/5732581.html#3766422" class="layer">#1楼</a><a name="3766422" id="comment_anchor_3766422"></a><span id="comment-maxId" style="display:none;">3766422</span><span id="comment-maxDate" style="display:none;">2017/8/25 15:05:34</span>  <span class="comment_date">2017-08-25 15:05</span> <a id="a_comment_author_3766422" href="http://www.cnblogs.com/liaoxf/" target="_blank">microhard</a> <a href="http://msg.cnblogs.com/send/microhard" title="发送站内短消息" class="sendMsg2This">&nbsp;</a>
			</div>
			<div class="feedbackCon">
				<div id="comment_body_3766422" class="blog_comment_body">好文章，必须要顶</div><div class="comment_vote"><a href="javascript:void(0);" class="comment_digg" onclick="return voteComment(3766422,&#39;Digg&#39;,this)">支持(1)</a><a href="javascript:void(0);" class="comment_bury" onclick="return voteComment(3766422,&#39;Bury&#39;,this)">反对(0)</a></div>
			</div>
		</div>
	<div id="comments_pager_bottom"></div></div><script type="text/javascript">var commentManager = new blogCommentManager();commentManager.renderComments(0);</script>
<div id="comment_form" class="commentform">
<a name="commentform"></a>
<div id="divCommentShow"></div>
<div id="comment_nav"><span id="span_refresh_tips"></span><a href="javascript:void(0);" onclick="return RefreshCommentList();" id="lnk_RefreshComments" runat="server" clientidmode="Static">刷新评论</a><a href="http://www.cnblogs.com/yuanchenqi/articles/5732581.html#" onclick="return RefreshPage();">刷新页面</a><a href="http://www.cnblogs.com/yuanchenqi/articles/5732581.html#top">返回顶部</a></div>
<div id="comment_form_container"><div class="login_tips">注册用户登录后才能发表评论，请 <a rel="nofollow" href="javascript:void(0);" class="underline" onclick="return login(&#39;commentform&#39;);">登录</a> 或 <a rel="nofollow" href="javascript:void(0);" class="underline" onclick="return register();">注册</a>，<a href="http://www.cnblogs.com/">访问</a>网站首页。</div></div>
<div class="ad_text_commentbox" id="ad_text_under_commentbox"></div>
<div id="ad_t2"></div>
<div id="opt_under_post"></div>
<div id="cnblogs_c1" class="c_ad_block"></div>
<div id="under_post_news"><div class="itnews c_ad_block"><b>最新IT新闻</b>:<br> ·  <a href="https://news.cnblogs.com/n/590019/" target="_blank">雅诗兰黛中国为何不肯为跨境电商站台？</a><br> ·  <a href="https://news.cnblogs.com/n/589991/" target="_blank">第一性原理：马斯克颠覆式创新的终极秘诀</a><br> ·  <a href="https://news.cnblogs.com/n/590033/" target="_blank">MongoDB 4.0将正式支持ACID事务</a><br> ·  <a href="https://news.cnblogs.com/n/590026/" target="_blank">谷歌新研究：开发令人类愉悦的人工智能</a><br> ·  <a href="https://news.cnblogs.com/n/590032/" target="_blank">ARKit 1.5现在支持垂直平面检测和2D图像识别</a><br>» <a href="http://news.cnblogs.com/" title="IT新闻" target="_blank">更多新闻...</a></div></div>
<div id="cnblogs_c2" class="c_ad_block"></div>
<div id="under_post_kb"><div class="itnews c_ad_block" id="kb_block"><b>最新知识库文章</b>:<br><div id="kb_recent"> ·  <a href="http://kb.cnblogs.com/page/586236/" target="_blank">领域驱动设计在互联网业务开发中的实践</a><br> ·  <a href="http://kb.cnblogs.com/page/585502/" target="_blank">步入云计算</a><br> ·  <a href="http://kb.cnblogs.com/page/531409/" target="_blank">以操作系统的角度述说线程与进程</a><br> ·  <a href="http://kb.cnblogs.com/page/141729/" target="_blank">软件测试转型之路</a><br> ·  <a href="http://kb.cnblogs.com/page/177402/" target="_blank">门内门外看招聘</a><br></div>» <a href="http://kb.cnblogs.com/" target="_blank">更多知识库文章...</a></div></div>
<div id="HistoryToday" class="c_ad_block"></div>
<script type="text/javascript">
    fixPostBody();
    setTimeout(function () { incrementViewCount(cb_entryId); }, 50);
    deliverAdT2();
    deliverAdC1();
    deliverAdC2();    
    loadNewsAndKb();
    loadBlogSignature();
    LoadPostInfoBlock(cb_blogId, cb_entryId, cb_blogApp, cb_blogUserGuid);
    GetPrevNextPost(cb_entryId, cb_blogId, cb_entryCreatedDate, cb_postType);
    loadOptUnderPost();
    GetHistoryToday(cb_blogId, cb_blogApp, cb_entryCreatedDate);   
</script>
</div>


	</div><!--end: forFlow -->
	</div><!--end: mainContent 主体内容容器-->

	<div id="sideBar">
		<div id="sideBarMain">
			
<!--done-->
<div class="newsItem">
<h3 class="catListTitle">公告</h3>
	<div id="blog-news"><div id="profile_block">昵称：<a href="https://home.cnblogs.com/u/yuanchenqi/">Yuan先生</a><br>园龄：<a href="https://home.cnblogs.com/u/yuanchenqi/" title="入园时间：2016-01-10">2年1个月</a><br>粉丝：<a href="https://home.cnblogs.com/u/yuanchenqi/followers/">790</a><br>关注：<a href="https://home.cnblogs.com/u/yuanchenqi/followees/">0</a><div id="p_b_follow"><a href="javascript:void(0);" onclick="follow(&#39;6d0ad0ce-3cb7-e511-9fc1-ac853d9f53cc&#39;)">+加关注</a></div><script>getFollowStatus('6d0ad0ce-3cb7-e511-9fc1-ac853d9f53cc')</script></div></div><script type="text/javascript">loadBlogNews();</script>
</div>

			<div id="blog-calendar" style=""><table id="blogCalendar" class="Cal" cellspacing="0" cellpadding="0" title="Calendar">
	<tbody><tr><td colspan="7"><table class="CalTitle" cellspacing="0">
		<tbody><tr><td class="CalNextPrev"><a href="javascript:void(0);" onclick="loadBlogCalendar(&#39;2018/01/01&#39;);return false;">&lt;</a></td><td align="center">2018年2月</td><td class="CalNextPrev" align="right"><a href="javascript:void(0);" onclick="loadBlogCalendar(&#39;2018/03/01&#39;);return false;">&gt;</a></td></tr>
	</tbody></table></td></tr><tr><th class="CalDayHeader" align="center" abbr="日" scope="col">日</th><th class="CalDayHeader" align="center" abbr="一" scope="col">一</th><th class="CalDayHeader" align="center" abbr="二" scope="col">二</th><th class="CalDayHeader" align="center" abbr="三" scope="col">三</th><th class="CalDayHeader" align="center" abbr="四" scope="col">四</th><th class="CalDayHeader" align="center" abbr="五" scope="col">五</th><th class="CalDayHeader" align="center" abbr="六" scope="col">六</th></tr><tr><td class="CalOtherMonthDay" align="center">28</td><td class="CalOtherMonthDay" align="center">29</td><td class="CalOtherMonthDay" align="center">30</td><td class="CalOtherMonthDay" align="center">31</td><td align="center">1</td><td align="center">2</td><td class="CalWeekendDay" align="center">3</td></tr><tr><td class="CalWeekendDay" align="center">4</td><td align="center">5</td><td align="center">6</td><td align="center">7</td><td align="center">8</td><td align="center">9</td><td class="CalWeekendDay" align="center">10</td></tr><tr><td class="CalWeekendDay" align="center">11</td><td align="center">12</td><td align="center">13</td><td align="center">14</td><td align="center">15</td><td align="center">16</td><td class="CalWeekendDay" align="center">17</td></tr><tr><td class="CalTodayDay" align="center">18</td><td align="center">19</td><td align="center">20</td><td align="center">21</td><td align="center">22</td><td align="center">23</td><td class="CalWeekendDay" align="center">24</td></tr><tr><td class="CalWeekendDay" align="center">25</td><td align="center">26</td><td align="center">27</td><td align="center">28</td><td class="CalOtherMonthDay" align="center">1</td><td class="CalOtherMonthDay" align="center">2</td><td class="CalOtherMonthDay" align="center">3</td></tr><tr><td class="CalOtherMonthDay" align="center">4</td><td class="CalOtherMonthDay" align="center">5</td><td class="CalOtherMonthDay" align="center">6</td><td class="CalOtherMonthDay" align="center">7</td><td class="CalOtherMonthDay" align="center">8</td><td class="CalOtherMonthDay" align="center">9</td><td class="CalOtherMonthDay" align="center">10</td></tr>
</tbody></table></div><script type="text/javascript">loadBlogDefaultCalendar();</script>
			
			<div id="leftcontentcontainer">
				<div id="blog-sidecolumn"><div id="sidebar_search" class="sidebar-block"></div><div id="sidebar_toptags" class="sidebar-block"></div><div id="sidebar_categories">
<div id="sidebar_postarchive" class="catListPostArchive sidebar-block">
<h3 class="catListTitle">随笔档案</h3>

<ul>

<li><a id="CatList_LinkList_0_Link_0" href="http://www.cnblogs.com/yuanchenqi/archive/2017/01.html">2017年1月 (1)</a> </li>

</ul>

</div>

</div><div id="sidebar_recentcomments" class="sidebar-block"><div id="recent_comments_wrap">
<div class="catListComment">
<h3 class="catListTitle">最新评论</h3>

	<div id="RecentCommentsBlock"><ul>
        <li class="recent_comment_title"><a href="http://www.cnblogs.com/yuanchenqi/articles/5786089.html#3906986">1. Re:Py西游攻关之Django（一）</a></li>
        <li class="recent_comment_body">大赞</li>
        <li class="recent_comment_author">--李崇</li>
        <li class="recent_comment_title"><a href="http://www.cnblogs.com/yuanchenqi/articles/5830025.html#3905300">2. Re:装饰器</a></li>
        <li class="recent_comment_body">顶</li>
        <li class="recent_comment_author">--Lilinpei</li>
        <li class="recent_comment_title"><a href="http://www.cnblogs.com/yuanchenqi/articles/5782764.html#3904765">3. Re:Py西游攻关之基础数据类型</a></li>
        <li class="recent_comment_body">不错 学习了</li>
        <li class="recent_comment_author">--向前迈一步</li>
        <li class="recent_comment_title"><a href="http://www.cnblogs.com/yuanchenqi/p/6337663.html#3903223">4. Re:操作系统核心简介</a></li>
        <li class="recent_comment_body">写的很好啊，老师如果你把文章索引放出来就好了</li>
        <li class="recent_comment_author">--zangfans</li>
        <li class="recent_comment_title"><a href="http://www.cnblogs.com/yuanchenqi/articles/7629939.html#3899815">5. Re:Django-MTV</a></li>
        <li class="recent_comment_body">66666</li>
        <li class="recent_comment_author">--wsspy</li>
</ul>
</div>
</div>
</div></div><div id="sidebar_topviewedposts" class="sidebar-block"><div id="topview_posts_wrap">
<div class="catListView">
<h3 class="catListTitle">阅读排行榜</h3>
	<div id="TopViewPostsBlock"><ul><li><a href="http://www.cnblogs.com/yuanchenqi/p/6337663.html">1. 操作系统核心简介(2536)</a></li></ul></div>
</div>
</div></div><div id="sidebar_topcommentedposts" class="sidebar-block"><div id="topfeedback_posts_wrap">
<div class="catListFeedback">
<h3 class="catListTitle">评论排行榜</h3>
	<div id="TopFeedbackPostsBlock"><ul><li><a href="http://www.cnblogs.com/yuanchenqi/p/6337663.html">1. 操作系统核心简介(7)</a></li></ul></div>
</div>
</div></div><div id="sidebar_topdiggedposts" class="sidebar-block"><div id="topdigg_posts_wrap">
<div class="catListView">
<h3 class="catListTitle">推荐排行榜</h3>
<div id="TopDiggPostsBlock"><ul><li><a href="http://www.cnblogs.com/yuanchenqi/p/6337663.html">1. 操作系统核心简介(3)</a></li></ul></div>
</div></div></div></div><script type="text/javascript">loadBlogSideColumn();</script>
			</div>
			
		</div><!--end: sideBarMain -->
	</div><!--end: sideBar 侧边栏容器 -->
	<div class="clear"></div>
	</div><!--end: main -->
	<div class="clear"></div>
	<div id="footer">
		
<!--done-->
Copyright ©2018 Yuan先生
	</div><!--end: footer -->
</div><!--end: home 自定义的最大容器 -->
<!--PageEndHtml Block Begin-->
<script language="javascript" type="text/javascript">
//生成目录索引列表
function GenerateContentList()
{
  var jquery_h1_list = $('#cnblogs_post_body h1').not('.catListTitle').not('#blogTitle h1');//如果你的章节标题不是h4,只需要将这里的h4换掉即可
  if(jquery_h1_list.length>0)
  {
    var content = '<a name="_labelTop"></a>';
    content	+= '<div id="navCategory">';
    content	+= '<p style="font-size:25px;color:#EE1289;"><i>知识预览</i></p>';
    content	+= '<ul id="sortChapter">';
    for(var i =0;i<jquery_h1_list.length;i++)
    {
      var go_to_top = '<div style="text-align: right"><a href="#_labelTop">回到顶部</a><a name="_label' + i + '"></a></div>';
      $(jquery_h1_list[i]).before(go_to_top);
      var li_content = '<li><a href="#_label' + i + '"style="color: #003366;text-decoration:none;font-size:18px">' + $(jquery_h1_list[i]).text() + '</a></li>';
      content += li_content;
    }
    content	+= '</ul>';
    content	+= '</div>';
    if($('#cnblogs_post_body').length != 0 )
    {
      $($('#cnblogs_post_body')[0]).prepend(content);
    }
  }	
}
GenerateContentList();
</script>
<!--PageEndHtml Block End-->


</body></html>